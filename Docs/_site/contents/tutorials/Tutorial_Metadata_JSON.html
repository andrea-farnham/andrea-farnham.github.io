<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="G.Fraga Gonzalez">
<meta name="dcterms.date" content="2024-07-01">
<title>Home - Metadata: making JSON files</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../contents/tutorials/Tutorial_Metadata_tables.html" rel="next">
<link href="../../contents/tutorials/index.html" rel="prev">
<link href="../../assets/logos/Logo_CRS_col.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script><link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
</head>
<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../assets/logos/Logo_AFFORD_col.svg" alt="" class="navbar-logo"></a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Home</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../../contents/ORD_index/index.html"> 
<span class="menu-text">Data Index</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../contents/tutorials/index.html" aria-current="page"> 
<span class="menu-text">Tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contents/templates/index.html"> 
<span class="menu-text">Templates</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contents/presentations/index.html"> 
<span class="menu-text">Presentations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contents/glossary/index.html"> 
<span class="menu-text">Glossary</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contents/contact/index.html"> 
<span class="menu-text">Contact</span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../contents/tutorials/Tutorial_Metadata_JSON.html">üè∑**Documentation &amp; Metadata**</a></li><li class="breadcrumb-item"><a href="../../contents/tutorials/Tutorial_Metadata_JSON.html">Metadata: making JSON files</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/tutorials/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorials</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">üè∑<strong>Documentation &amp; Metadata</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/tutorials/Tutorial_Metadata_JSON.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Metadata: making JSON files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/tutorials/Tutorial_Metadata_tables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Metadata: tables</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">üî≠<strong>Finding, Sharing and Publishing</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/tutorials/Tutorial_Gitlab_workflows.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Gitlab workflows</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/tutorials/Tutorial_Gitlab1_IntroGit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Gitlab Tutorial 1. Step-by-Step Guide to Git and Gitlab</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/tutorials/Tutorial_Gitlab2_DataIndex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Gitlab Tutorial 2. Create and Update a Data Index</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/tutorials/Tutorial_Gitlab3_CI.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Gitlab Tutorial 3. Continuous Integration (CI)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contents/tutorials/Tutorial_Web.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Website Tutorial using R, Quarto and Gitlab Pages</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../contents/tutorials/Tutorial_Metadata_JSON.html">üè∑**Documentation &amp; Metadata**</a></li><li class="breadcrumb-item"><a href="../../contents/tutorials/Tutorial_Metadata_JSON.html">Metadata: making JSON files</a></li></ol></nav><div class="quarto-title">
<h1 class="title">Metadata: making JSON files</h1>
<p class="subtitle lead">In this use case we read the JSON fields from a table and create JSON files with generic and file-specific information</p>
  <div class="quarto-categories">
    <div class="quarto-category">Code</div>
    <div class="quarto-category">R</div>
    <div class="quarto-category">Intermediate</div>
  </div>
  </div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">G.Fraga Gonzalez <a href="https://orcid.org/0000-0002-1857-8607" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Center for Reproducible Science, UZH
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 1, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header><p><strong>Create a JSON file with metadata from tables and data files</strong></p>
<p>In this example we create simple human and machine-readable metadata files in JavaScript Object Notation <a href="https://www.json.org/json-en.html">(JSON)</a>. They consists of fields of key-value pairs. These are <em>sidecar</em> metadata files, that is, they accompany a separate source data file (for this example we use dummy images as data files). In this use case, researchers can edit a table specifying the fields in the JSON file. This script creates a JSON with these fields. Some of the values in the JSON fields are filled for each of the data files based on the filename and an additional table with metadata (subject information).</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>There are good editors with a graphical interface available online to read and write JSON. We recommend the following website: <a href="https://jsoneditoronline.org/" class="uri">https://jsoneditoronline.org/</a></p>
<p>In general, we recommend creating JSON files with a script and not manually, to prevent data entry errors. JSON metadata files are part of essential machine-readable metadata, and additional to structured metadata (tables) which may contain human-only readable columns (e.g., ‚Äòcomment‚Äô variables wtih free text notes). JSON files can have more details than the metadata tables.</p>
</div>
</div>
</div>
<p><img src="images/banner_json-01.png" class="img-fluid" width="659"></p>
<p>This use case is based on:</p>
<section id="inputs" class="level4"><h4 class="anchored" data-anchor-id="inputs">inputs</h4>
<ul>
<li><p>A csv table specifying the JSON <em>keys</em> (e.g., ‚ÄúSynchrotronName‚Äù,‚ÄúSpeciesName‚Äù ) and their <em>values</em> (e.g., ‚Äúmouse‚Äù) when they apply to all files. If a value is blank it will be filled by information in the filename or table with subject information (see below)</p></li>
<li><p>A collection of data files encoding subject ID in their name.</p></li>
<li><p>An Excel table with subjects information (e.g.,sex, body weight) that has to be added to the JSON file</p></li>
</ul>
<p>We will use the R package <a href="https://cran.r-project.org/web/packages/jsonlite/index.html">jsonlite</a> to write the JSON string</p>
</section><section id="outputs" class="level4"><h4 class="anchored">outputs</h4>
<p>A JSON file per data file with the fields from the table is created for each file with the same filename and the subject ID added in the corresponding json field. In this case the data files are images from mice.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note on this example
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>This demo uses a dummy data set, i.e., the JSON fields and metadata have no real-life meaning.Metadata tables can be prepared in a spreadsheet and saved in different file formats for example csv and Excel. In actual projects the csv file format is preferred over Excel, for the sake of interoperability.</p>
</div>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">How-to</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Code</a></li>
</ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<section id="read-table-with-json-fields-and-table-with-subjects-information" class="level3"><h3 class="anchored" data-anchor-id="read-table-with-json-fields-and-table-with-subjects-information">Read table with JSON fields and table with subjects information</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Enter input directories </span></span>
<span><span class="va">dirinput</span> <span class="op">&lt;-</span> <span class="st">'dummy_data'</span></span>
<span><span class="va">diroutput</span> <span class="op">&lt;-</span> <span class="st">'../../_data/'</span></span>
<span></span>
<span><span class="co"># Read table with JSON fields </span></span>
<span><span class="va">jsonFields</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">dirinput</span>,<span class="st">'Dummy_JSON_fields.csv'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Read table with subject information</span></span>
<span><span class="va">subj_info</span> <span class="op">&lt;-</span> <span class="fu">openxlsx</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/openxlsx/man/read.xlsx.html">read.xlsx</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">dirinput</span>,<span class="st">'DummyData1_20241234_subjects.xlsx'</span><span class="op">)</span>, sheet <span class="op">=</span> <span class="st">'subject_info'</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="read-data-filenames-and-separate-subject-id" class="level3"><h3 class="anchored" data-anchor-id="read-data-filenames-and-separate-subject-id">Read data filenames and separate subject ID</h3>
<p>Here we read some .jpg pictures with dummy images. The first filename part contains the subject ID.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Create table filenames </span></span>
<span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">dirinput</span>,<span class="st">'Images'</span><span class="op">)</span><span class="op">)</span> <span class="co"># Find all files in our images folder</span></span>
<span></span>
<span><span class="co"># Use pattern to take only subject images</span></span>
<span><span class="va">fname</span> <span class="op">&lt;-</span> <span class="va">files</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">'^DS.*.jpg$'</span><span class="op">)</span>,<span class="va">files</span><span class="op">)</span><span class="op">]</span> </span>
<span><span class="va">tbl_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">fname</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># First filename part contains subject ID. Create new column with that info. </span></span>
<span><span class="va">tbl_files</span><span class="op">$</span><span class="va">subject</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/strsplit.html">strsplit</a></span><span class="op">(</span><span class="va">fname</span>,<span class="st">'_'</span><span class="op">)</span>,<span class="st">'[['</span>,<span class="fl">1</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="check-input-tables" class="level3"><h3 class="anchored" data-anchor-id="check-input-tables">Check input tables</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">JSON fields</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Subject information</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Filenames</a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>In this table we created the column <strong>Data.name</strong> that indicates the <em>key</em> and the column <strong>Permissible.values</strong> which will indicate the <em>value</em> in the JSON file. The other columns are not necessary for this example, but can help the users when specifying the content of their JSON files. The entries in Permissible.values will be filled with file-specific information.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The names of these columns are arbitrary and you can define any other name. It is important to note the format of the values (e.g., numeric, alphanumeric or strings). The values can also be arrays <code>[1,2,3]</code>. A JSON file can have a more hierarchical structure with keys and subkeys. In this example we use a simple structure.</p>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># check </span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">jsonFields</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html">scroll_box</a></span><span class="op">(</span>height<span class="op">=</span> <span class="st">"300px"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; ">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead><tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">JSON_section</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">Data.name</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">Data.Description</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">Data.type</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">Permissible.values</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Info</td>
<td style="text-align: left;">SynchrotronName</td>
<td style="text-align: left;">Name of the synchrotron facility</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">Dummy-synchrotron</td>
</tr>
<tr class="even">
<td style="text-align: left;">Info</td>
<td style="text-align: left;">SynchrotronAcronym</td>
<td style="text-align: left;">Acronym of the synchrotron facility</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">Sync1234</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Info</td>
<td style="text-align: left;">IntendedFor</td>
<td style="text-align: left;">Name of the source file this metadata describes</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Info</td>
<td style="text-align: left;">BeamlineAcronym</td>
<td style="text-align: left;">Institution defined name of the machine. Corresponds to DICOM Tag DICOM tag 0008,1010.</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">BL20B2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Info</td>
<td style="text-align: left;">BeamtimeSessionStartDate</td>
<td style="text-align: left;">YYYY-MM-DD</td>
<td style="text-align: left;">date</td>
<td style="text-align: left;">2024-01-13</td>
</tr>
<tr class="even">
<td style="text-align: left;">Info</td>
<td style="text-align: left;">BeamtimeSessionEndDate</td>
<td style="text-align: left;">YYYY-MM-DD</td>
<td style="text-align: left;">date</td>
<td style="text-align: left;">2024-01-13</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Info</td>
<td style="text-align: left;">SpeciesName</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">mouse (mus musculus)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Info</td>
<td style="text-align: left;">SpeciesStrain</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">alphanumeric</td>
<td style="text-align: left;">C123456</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Info</td>
<td style="text-align: left;">SubjectID</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">alphanumeric</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Info</td>
<td style="text-align: left;">Sex</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">alphanumeric</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Info</td>
<td style="text-align: left;">BodyWeight_gr</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">number</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Info</td>
<td style="text-align: left;">BodyPart</td>
<td style="text-align: left;">Name of the organ / body region scanned. Corresponds to DICOM Tag DICOM tag 0018,0015.</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">brain</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Acquisition</td>
<td style="text-align: left;">DetectorArrayWidth</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">123</td>
</tr>
<tr class="even">
<td style="text-align: left;">Acquisition</td>
<td style="text-align: left;">DetectorArrayHeight</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">456</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Acquisition</td>
<td style="text-align: left;">DetectorBitDepth</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">16</td>
</tr>
<tr class="even">
<td style="text-align: left;">Acquisition</td>
<td style="text-align: left;">DetectorPixelSize</td>
<td style="text-align: left;">in ¬µm</td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Acquisition</td>
<td style="text-align: left;">RotationAngle</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">180</td>
</tr>
<tr class="even">
<td style="text-align: left;">Reconstruction</td>
<td style="text-align: left;">CenterOfRotationMethod</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">manual</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Reconstruction</td>
<td style="text-align: left;">CenterOfRotationValue</td>
<td style="text-align: left;">In pixels"</td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Reconstruction</td>
<td style="text-align: left;">ReconMatrixSize&nbsp;</td>
<td style="text-align: left;">Size of the reconstruction matrix&nbsp;in pixels</td>
<td style="text-align: left;">array of three numbers</td>
<td style="text-align: left;">[1,1,2]</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Reconstruction</td>
<td style="text-align: left;">ReconMethodNameMethodName</td>
<td style="text-align: left;">Reconstruction method or algorithm. Corresponds to DICOM Tag 0054,1103.&nbsp;</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">dummy-method</td>
</tr>
<tr class="even">
<td style="text-align: left;">Reconstruction</td>
<td style="text-align: left;">MethodImplementationVersion&nbsp;</td>
<td style="text-align: left;">Identification for the software used, such as name and version (optional)&nbsp;</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">in-house-bash-script-v02</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Reconstruction</td>
<td style="text-align: left;">FilterType&nbsp;</td>
<td style="text-align: left;">Type of post-recon smoothing&nbsp;</td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">gaussian</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># check </span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">subj_info</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html">scroll_box</a></span><span class="op">(</span>height<span class="op">=</span> <span class="st">"300px"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; ">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead><tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">subjID</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">Sex</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">Body.weight.(g)</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">length.(mm)</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">Dilut.(x)</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">Con.(mg.Ba/ml)</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">Int.1.rate.(uL/min)</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">Int.2.vol.(uL)</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">time.(HH:MM)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">DS01</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">27.50</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">123</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">0.8666667</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS02</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">26.60</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">123</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.4680556</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS03</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">27.50</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">123</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.4173611</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS04</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">20.20</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">123</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">0.9777778</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS05</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">20.20</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">123</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.7993056</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS06</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">20.30</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">123</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">0.7006944</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS07</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">26.40</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">123</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.6284722</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS08</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">24.60</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">123</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS09</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">26.80</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">123</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">0.8402778</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS10</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">25.70</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">123</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.7069444</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS11</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">24.40</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">123</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">0.6895833</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS12</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">25.30</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">111</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.5312500</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS13</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">24.70</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">111</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.7083333</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS14</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">27.00</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">111</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.9569444</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS15</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">24.00</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">111</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">0.8638889</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS16</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">25.80</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">111</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">0.4118056</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS17</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">26.40</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">111</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS18</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">26.60</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">0.5805556</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS19</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">26.90</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">0.4722222</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS20</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">26.20</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">0.6520833</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS21</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">21.00</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">0.5486111</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS22</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">19.50</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.7812500</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS23</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">19.60</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.7611111</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS24</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">19.56</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.8715278</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS25</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">19.63</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">0.6125000</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS26</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">19.71</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.5375000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS27</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">19.20</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">0.9298611</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS28</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">20.20</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.7451389</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS29</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">18.60</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.4687500</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS30</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">19.03</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">0.6833333</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS31</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">20.50</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">13.3800000</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS32</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">20.20</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.6256944</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS33</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">21.20</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">0.8361111</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS34</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">19.21</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">321</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.7090278</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># check </span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">tbl_files</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html">scroll_box</a></span><span class="op">(</span>height<span class="op">=</span> <span class="st">"300px"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; ">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead><tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">fname</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">subject</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">DS01_statB_1scan_slc1234.jpg</td>
<td style="text-align: left;">DS01</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS02_statB_1scan-v3_slc1234.jpg</td>
<td style="text-align: left;">DS02</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS03_statB_1scan_slc1234.jpg</td>
<td style="text-align: left;">DS03</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS04_statB_1scan_v2_slc1234.jpg</td>
<td style="text-align: left;">DS04</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS04_statB_1scan_v3_slc1234.jpg</td>
<td style="text-align: left;">DS04</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS05_statB_1scan_slc1234.jpg</td>
<td style="text-align: left;">DS05</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS06_statB_1scan_slc1234.jpg</td>
<td style="text-align: left;">DS06</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS07_statB_1scan_slc1234.jpg</td>
<td style="text-align: left;">DS07</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS08_statB_1scan_slc1234.jpg</td>
<td style="text-align: left;">DS08</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS09_statA_1scan-head_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS09_statA_1scan-neck_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS09_statA_1scan-nose-v2_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS09_statA_1scan-nose_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_001_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_002_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_003_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_004_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_005_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_006_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_007_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_008_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_009_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_010_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_011_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_012_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_013_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_014_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_015_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_016_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_017_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_018_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_019_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS09_statA_20scan-ph1-Int_020_slc1234.jpg</td>
<td style="text-align: left;">DS09</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
</div>
</div>
</section><section id="create-the-json-files" class="level3"><h3 class="anchored" data-anchor-id="create-the-json-files">Create the JSON files</h3>
<section id="prepare-table" class="level4"><h4 class="anchored" data-anchor-id="prepare-table">Prepare table</h4>
<p>Prepare the human-readable table specifying the JSON fields into a suitable format to read with <code><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html">jsonlite::toJSON()</a></code></p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Preserve the sorting of the field names as in the table</span></span>
<span><span class="va">sorted_fieldnames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">jsonFields</span><span class="op">$</span><span class="va">Data.name</span>, levels <span class="op">=</span> <span class="va">jsonFields</span><span class="op">$</span><span class="va">Data.name</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Transform table into a list. Each element is a fieldname with its values</span></span>
<span><span class="va">json_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/split.html">split</a></span><span class="op">(</span><span class="va">jsonFields</span><span class="op">$</span><span class="va">Permissible.values</span>,<span class="va">sorted_fieldnames</span><span class="op">)</span>,<span class="va">as.character</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="add-file-specific-information" class="level4"><h4 class="anchored" data-anchor-id="add-file-specific-information">Add file-specific information</h4>
<p>Loop through the image files and fill the file-specific values in the JSON file with information from the table with subject info.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://jeroen.r-universe.dev/jsonlite">jsonlite</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Join tables with filenames and subject information by subjID</span></span>
<span><span class="va">metadat</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">tbl_files</span>, y<span class="op">=</span><span class="va">subj_info</span>, by<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html">join_by</a></span><span class="op">(</span><span class="st">'subject'</span><span class="op">==</span><span class="st">'subjID'</span><span class="op">)</span>,keep<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>  </span>
<span></span>
<span><span class="co"># write JSON files </span></span>
<span><span class="va">saveoutput</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">tbl_files</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="co"># Complete Fields with info From table </span></span>
<span>  <span class="va">json_data</span><span class="op">$</span><span class="va">IntendedFor</span> <span class="op">=</span> <span class="va">metadat</span><span class="op">$</span><span class="va">fname</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="va">json_data</span><span class="op">$</span><span class="va">SubjectID</span> <span class="op">=</span> <span class="va">metadat</span><span class="op">$</span><span class="va">subject</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="va">json_data</span><span class="op">$</span><span class="va">Sex</span> <span class="op">=</span> <span class="va">metadat</span><span class="op">$</span><span class="va">Sex</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="va">json_data</span><span class="op">$</span><span class="va">BodyWeight_gr</span> <span class="op">=</span> <span class="va">metadat</span><span class="op">$</span><span class="va">`Body.weight.(g)`</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  </span>
<span>  </span>
<span>  <span class="co"># Convert the list to a JSON string</span></span>
<span>  <span class="va">json_string</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html">toJSON</a></span><span class="op">(</span><span class="va">json_data</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span>, auto_unbox <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Save the JSON string to a file</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">saveoutput</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ouputfilename</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">'.jpg'</span>,<span class="st">'.json'</span>,<span class="va">tbl_files</span><span class="op">$</span><span class="va">fname</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span> <span class="co"># rename input file</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/write.html">write</a></span><span class="op">(</span><span class="va">json_string</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">diroutput</span>, <span class="va">ouputfilename</span><span class="op">)</span><span class="op">)</span>  </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Wrote "</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">diroutput</span>, <span class="va">ouputfilename</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="co"># clean json </span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span> <span class="op">(</span><span class="va">json_string</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="output-examples" class="level4"><h4 class="anchored" data-anchor-id="output-examples">Output Examples</h4>
<p>The r package <code>jsonlite</code> offers several formatting options. Depending on your needs you may have some preferences.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">JSON with auto_unbox = TRUE</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">JSON with auto_unbox = FALSE</a></li>
</ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html">toJSON</a></span><span class="op">(</span><span class="va">json_data</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span>, auto_unbox <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>{
  "SynchrotronName": "Dummy-synchrotron",
  "SynchrotronAcronym": "Sync1234",
  "IntendedFor": "DS09_statA_20scan-ph1-Int_020_slc1234.jpg",
  "BeamlineAcronym": "BL20B2",
  "BeamtimeSessionStartDate": "2024-01-13",
  "BeamtimeSessionEndDate": "2024-01-13",
  "SpeciesName": "mouse (mus musculus)",
  "SpeciesStrain": "C123456 ",
  "SubjectID": "DS09",
  "Sex": "F",
  "BodyWeight_gr": 26.8,
  "BodyPart": "brain",
  "DetectorArrayWidth": "123",
  "DetectorArrayHeight": "456",
  "DetectorBitDepth": "16",
  "DetectorPixelSize": "6",
  "RotationAngle": "180",
  "CenterOfRotationMethod": "manual",
  "CenterOfRotationValue": "3",
  "ReconMatrixSize&nbsp;": "[1,1,2]",
  "ReconMethodNameMethodName": "dummy-method",
  "MethodImplementationVersion&nbsp;": "in-house-bash-script-v02",
  "FilterType&nbsp;": "gaussian"
} </code></pre>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html">toJSON</a></span><span class="op">(</span><span class="va">json_data</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span>, auto_unbox <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>{
  "SynchrotronName": ["Dummy-synchrotron"],
  "SynchrotronAcronym": ["Sync1234"],
  "IntendedFor": ["DS09_statA_20scan-ph1-Int_020_slc1234.jpg"],
  "BeamlineAcronym": ["BL20B2"],
  "BeamtimeSessionStartDate": ["2024-01-13"],
  "BeamtimeSessionEndDate": ["2024-01-13"],
  "SpeciesName": ["mouse (mus musculus)"],
  "SpeciesStrain": ["C123456 "],
  "SubjectID": ["DS09"],
  "Sex": ["F"],
  "BodyWeight_gr": [26.8],
  "BodyPart": ["brain"],
  "DetectorArrayWidth": ["123"],
  "DetectorArrayHeight": ["456"],
  "DetectorBitDepth": ["16"],
  "DetectorPixelSize": ["6"],
  "RotationAngle": ["180"],
  "CenterOfRotationMethod": ["manual"],
  "CenterOfRotationValue": ["3"],
  "ReconMatrixSize&nbsp;": ["[1,1,2]"],
  "ReconMethodNameMethodName": ["dummy-method"],
  "MethodImplementationVersion&nbsp;": ["in-house-bash-script-v02"],
  "FilterType&nbsp;": ["gaussian"]
} </code></pre>
</div>
</div>
</div>
</div>
</div>
</section></section>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Enter input directories </span></span>
<span><span class="va">dirinput</span> <span class="op">&lt;-</span> <span class="st">'dummy_data'</span></span>
<span><span class="va">diroutput</span> <span class="op">&lt;-</span> <span class="st">'../../_data/'</span></span>
<span></span>
<span><span class="co"># Read table with JSON fields </span></span>
<span><span class="va">jsonFields</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">dirinput</span>,<span class="st">'Dummy_JSON_fields.csv'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Read table with subject information</span></span>
<span><span class="va">subj_info</span> <span class="op">&lt;-</span> <span class="fu">openxlsx</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/openxlsx/man/read.xlsx.html">read.xlsx</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">dirinput</span>,<span class="st">'DummyData1_20241234_subjects.xlsx'</span><span class="op">)</span>, sheet <span class="op">=</span> <span class="st">'subject_info'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create table filenames </span></span>
<span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">dirinput</span>,<span class="st">'Images'</span><span class="op">)</span><span class="op">)</span> <span class="co"># Find all files in our images folder</span></span>
<span></span>
<span><span class="co"># Use pattern to take only subject images</span></span>
<span><span class="va">fname</span> <span class="op">&lt;-</span> <span class="va">files</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">'^DS.*.jpg$'</span><span class="op">)</span>,<span class="va">files</span><span class="op">)</span><span class="op">]</span> </span>
<span><span class="va">tbl_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">fname</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># First filename part contains subject ID. Create new column with that info. </span></span>
<span><span class="va">tbl_files</span><span class="op">$</span><span class="va">subject</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/strsplit.html">strsplit</a></span><span class="op">(</span><span class="va">fname</span>,<span class="st">'_'</span><span class="op">)</span>,<span class="st">'[['</span>,<span class="fl">1</span><span class="op">)</span> </span>
<span><span class="co"># Preserve the sorting of the field names as in the table</span></span>
<span><span class="va">sorted_fieldnames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">jsonFields</span><span class="op">$</span><span class="va">Data.name</span>, levels <span class="op">=</span> <span class="va">jsonFields</span><span class="op">$</span><span class="va">Data.name</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Transform table into a list. Each element is a fieldname with its values</span></span>
<span><span class="va">json_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/split.html">split</a></span><span class="op">(</span><span class="va">jsonFields</span><span class="op">$</span><span class="va">Permissible.values</span>,<span class="va">sorted_fieldnames</span><span class="op">)</span>,<span class="va">as.character</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://jeroen.r-universe.dev/jsonlite">jsonlite</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Join tables with filenames and subject information by subjID</span></span>
<span><span class="va">metadat</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">tbl_files</span>, y<span class="op">=</span><span class="va">subj_info</span>, by<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html">join_by</a></span><span class="op">(</span><span class="st">'subject'</span><span class="op">==</span><span class="st">'subjID'</span><span class="op">)</span>,keep<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>  </span>
<span></span>
<span><span class="co"># write JSON files </span></span>
<span><span class="va">saveoutput</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">tbl_files</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="co"># Complete Fields with info From table </span></span>
<span>  <span class="va">json_data</span><span class="op">$</span><span class="va">IntendedFor</span> <span class="op">=</span> <span class="va">metadat</span><span class="op">$</span><span class="va">fname</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="va">json_data</span><span class="op">$</span><span class="va">SubjectID</span> <span class="op">=</span> <span class="va">metadat</span><span class="op">$</span><span class="va">subject</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="va">json_data</span><span class="op">$</span><span class="va">Sex</span> <span class="op">=</span> <span class="va">metadat</span><span class="op">$</span><span class="va">Sex</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="va">json_data</span><span class="op">$</span><span class="va">BodyWeight_gr</span> <span class="op">=</span> <span class="va">metadat</span><span class="op">$</span><span class="va">`Body.weight.(g)`</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  </span>
<span>  </span>
<span>  <span class="co"># Convert the list to a JSON string</span></span>
<span>  <span class="va">json_string</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html">toJSON</a></span><span class="op">(</span><span class="va">json_data</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span>, auto_unbox <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Save the JSON string to a file</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">saveoutput</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ouputfilename</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">'.jpg'</span>,<span class="st">'.json'</span>,<span class="va">tbl_files</span><span class="op">$</span><span class="va">fname</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span> <span class="co"># rename input file</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/write.html">write</a></span><span class="op">(</span><span class="va">json_string</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">diroutput</span>, <span class="va">ouputfilename</span><span class="op">)</span><span class="op">)</span>  </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Wrote "</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">diroutput</span>, <span class="va">ouputfilename</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="co"># clean json </span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span> <span class="op">(</span><span class="va">json_string</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>


</section><a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../../contents/tutorials/index.html" class="pagination-link  aria-label=" tutorials="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Tutorials</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../contents/tutorials/Tutorial_Metadata_tables.html" class="pagination-link" aria-label="Metadata: tables">
        <span class="nav-page-text">Metadata: tables</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>Created by G.Fraga-Gonzalez (<a href="https://www.crs.uzh.ch/en.html">Center for Reproducible Science</a> of the <a href="https://www.uzh.ch/de.html">University of Zurich</a>).</p>
</div>   
    <div class="nav-footer-center">
<p><a href="contents/about/index.html">About Us</a></p>
</div>
    <div class="nav-footer-right">
<p>This is a free website under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY international license 4.0</a>. Source code on <a href="https://gitlab.uzh.ch/crsuzh/AFFORD_website"><img src="https://images.ctfassets.net/xz1dnu24egyd/1hnQd13UBU7n5V0RsJcbP3/769692e40a6d528e334b84f079c1f577/gitlab-logo-100.png" class="img-fluid" alt="Git" width="65"></a></p>
</div>
  </div>
</footer>


</body></html>