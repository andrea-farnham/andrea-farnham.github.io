[
  {
    "objectID": "Table_read_file.html",
    "href": "Table_read_file.html",
    "title": "Read tables from file",
    "section": "",
    "text": "We describe a frequent first step of reading tabular data, with emphasis in the necessary troubleshooting that should help us maintaining source tables machine-readable and ready for further processing, analysis, visualizations and sharing. In this example we read a table from a real-project that was filled in by the researchers during the data collection. The information in this table is required to interpret the data collected for each subject."
  },
  {
    "objectID": "Table_read_file.html#section",
    "href": "Table_read_file.html#section",
    "title": "Read tables from file",
    "section": "",
    "text": "In this example we read an excel file with a subject information table that was filled in by the researchers during the data collection. This information is required to interpret the data collected for each subject."
  },
  {
    "objectID": "Table_read_file.html#read-input",
    "href": "Table_read_file.html#read-input",
    "title": "Read table from file",
    "section": "Read input",
    "text": "Read input\nFirst we need to load some libraries. The packages should have been installed before. For example, install.packages().\n\n# Required libraries\nlibrary(readxl)     # for reading excel (another package is openxlsx) \nlibrary(dplyr)      # data manipulation grammar like the pipe %&gt;%, join operations, \nlibrary(kableExtra) # to render simple and pretty static tables \n\nThen we specify the fullpath of the excel file. Note that we use the path relative to this R Quarto project: in this case our data folders is two folders above (using dirname we go a folder above) the current project folder defined by getwd(). By using file.path we avoid hardcoding the folder separators increasing interoperability across operating systems. Then the content of a specific sheet in the file is read.\n\n# Read file\nfileinput &lt;- file.path(dirname(dirname(getwd())), '_data','SPring','Mice_Information_SPring-8_20230508.xlsx')\ntbl_subj &lt;- readxl::read_excel(fileinput, sheet='Control_room_sheet')"
  },
  {
    "objectID": "Table_read_file.html#cross-check-the-result",
    "href": "Table_read_file.html#cross-check-the-result",
    "title": "",
    "section": "Cross-check the result",
    "text": "Cross-check the result\nThere are many things to check and many ways of doing it.\n\nStart with an Overview of dimensions, object type and data types of each variable\n\n\nstr(tbl_subj, nchar.max = 35)\n\ntibble [34 × 16] (S3: tbl_df/tbl/data.frame)\n $ Name                                         : chr [1:34] \"JP01\" \"JP02\" \"JP03\" \"JP04\" ...\n $ Sex                                          : chr [1:34] \"Male\" \"Male\" \"Male\" \"Female\" ...\n $ Body weight [g]                              : num [1:34] 27.5 26.6 27.5 20.2 | __truncated__ ...\n $ Cannula length (mm)                          : num [1:34] 2.3 2.3 2.3 2.3 2.2 | __truncated__ ...\n $ Dilution                                     : chr [1:34] \"1.5x\" \"1.5x\" \"1.5x\" \"1.5x\" ...\n $ Concentration                                : chr [1:34] \"480 mg Ba/ml\" \"480 mg Ba/ml\" \"480 mg Ba/ml\" \"480 mg Ba/ml\" ...\n $ Withdrawn CA in syringe (uL)                 : num [1:34] 5 5 5 5 5 5 5 5 17 17 ...\n $ Infused CA in mannitol (uL)                  : num [1:34] NA NA NA NA NA NA NA NA 0.2 0.2 ...\n $ Injection 1 rate (uL/min)                    : num [1:34] 0.1 0.1 0.1 0.1 0.1 | __truncated__ ...\n $ Injection 1 volume (uL)                      : num [1:34] 2.5 2.5 2.5 2.5 2.5 2.5 2.5 2.5 5 5 ...\n $ Injection 1 JP time (HH:MM)                  : POSIXct[1:34], format: \"1899-12-31 15:05:00\" \"1899-12-31 18:16:00\" ...\n $ Injection 2 rate (uL/min)                    : num [1:34] NA NA NA NA NA NA NA NA NA NA ...\n $ Injection 2 volume (uL)                      : chr [1:34] NA NA NA NA ...\n $ Injection 2 JP time (HH:MM)                  : POSIXct[1:34], format: NA NA ...\n $ Bubbles?                                     : logi [1:34] NA NA NA NA NA NA ...\n $ Comments, anything different in the protocol?: chr [1:34] \"scanned dead\" \"scanned dead\" \"probably not full \"| __truncated__ \"scanned dead\" ..."
  },
  {
    "objectID": "Table_read_file.html#check-the-result",
    "href": "Table_read_file.html#check-the-result",
    "title": "Read tables from file",
    "section": "Check the result",
    "text": "Check the result\nThere are many things to check and many ways of doing it.\nDisplay object structure\nCheck dimensions, object type, variable names and data types You can use str() to display the internal structure of the object created when reading the file. The first line of the output specifies [n rows x n columns] and the type of object (e.g., data frame) and it then lists each variable, their data type (e.g., num = numeric, chr = characters), dimensions and show content of a first cases. There are many options in the function to adapt the output if you have large data set, for example, limiting the number of characters, as in the example.\n\nstr(tbl_subj, nchar.max = 35)\n\ntibble [34 × 16] (S3: tbl_df/tbl/data.frame)\n $ Name                                         : chr [1:34] \"JP01\" \"JP02\" \"JP03\" \"JP04\" ...\n $ Sex                                          : chr [1:34] \"Male\" \"Male\" \"Male\" \"Female\" ...\n $ Body weight [g]                              : num [1:34] 27.5 26.6 27.5 20.2 | __truncated__ ...\n $ Cannula length (mm)                          : num [1:34] 2.3 2.3 2.3 2.3 2.2 | __truncated__ ...\n $ Dilution                                     : chr [1:34] \"1.5x\" \"1.5x\" \"1.5x\" \"1.5x\" ...\n $ Concentration                                : chr [1:34] \"480 mg Ba/ml\" \"480 mg Ba/ml\" \"480 mg Ba/ml\" \"480 mg Ba/ml\" ...\n $ Withdrawn CA in syringe (uL)                 : num [1:34] 5 5 5 5 5 5 5 5 17 17 ...\n $ Infused CA in mannitol (uL)                  : num [1:34] NA NA NA NA NA NA NA NA 0.2 0.2 ...\n $ Injection 1 rate (uL/min)                    : num [1:34] 0.1 0.1 0.1 0.1 0.1 | __truncated__ ...\n $ Injection 1 volume (uL)                      : num [1:34] 2.5 2.5 2.5 2.5 2.5 2.5 2.5 2.5 5 5 ...\n $ Injection 1 JP time (HH:MM)                  : POSIXct[1:34], format: \"1899-12-31 15:05:00\" \"1899-12-31 18:16:00\" ...\n $ Injection 2 rate (uL/min)                    : num [1:34] NA NA NA NA NA NA NA NA NA NA ...\n $ Injection 2 volume (uL)                      : chr [1:34] NA NA NA NA ...\n $ Injection 2 JP time (HH:MM)                  : POSIXct[1:34], format: NA NA ...\n $ Bubbles?                                     : logi [1:34] NA NA NA NA NA NA ...\n $ Comments, anything different in the protocol?: chr [1:34] \"scanned dead\" \"scanned dead\" \"probably not full \"| __truncated__ \"scanned dead\" ...\n\n\nRender the table\nAn option when working with an IDE (e.g., Rstudio) is usually click on the variable and a window will allow to navigate the table. In documents like this you can use kable() to render the table. In this case we add a scroll box to make it compact.\n\nknitr::kable(\n  tbl_subj\n) %&gt;%\n  kable_paper(bootstrap_options = c(\"basic\",\"hover\")) %&gt;%\n  scroll_box(height= \"400px\")\n\n\n\n\nName\nSex\nBody weight [g]\nCannula length (mm)\nDilution\nConcentration\nWithdrawn CA in syringe (uL)\nInfused CA in mannitol (uL)\nInjection 1 rate (uL/min)\nInjection 1 volume (uL)\nInjection 1 JP time (HH:MM)\nInjection 2 rate (uL/min)\nInjection 2 volume (uL)\nInjection 2 JP time (HH:MM)\nBubbles?\nComments, anything different in the protocol?\n\n\n\nJP01\nMale\n27.50\n2.3\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 15:05:00\nNA\nNA\nNA\nNA\nscanned dead\n\n\nJP02\nMale\n26.60\n2.3\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 18:16:00\nNA\nNA\nNA\nNA\nscanned dead\n\n\nJP03\nMale\n27.50\n2.3\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 20:55:00\nNA\nNA\nNA\nNA\nprobably not full volume injected, scanned dead\n\n\nJP04\nFemale\n20.20\n2.3\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 11:15:00\nNA\nNA\nNA\nNA\nscanned dead\n\n\nJP05\nFemale\n20.20\n2.2\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 15:01:00\nNA\nNA\nNA\nNA\nscanned dead\n\n\nJP06\nFemale\n20.30\n2.2\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\nNA\nNA\nNA\nNA\nNA\nscanned dead\n\n\nJP07\nMale\n26.40\n2.3\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 17:00:00\nNA\nNA\nNA\nNA\nscanned dead\n\n\nJP08\nMale\n24.60\n2.3\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 12:45:00\nNA\nNA\nNA\nNA\ninjection post mortem, scanned dead\n\n\nJP09\nMale\n26.80\n2.3\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n1899-12-31 13:56:00\nNA\nNA\nNA\nNA\nnot all 17ul withdrawn (air?)\n\n\nJP10\nMale\n25.70\n2.3\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n1899-12-31 16:33:00\nNA\nNA\nNA\nNA\nnot all 17ul withdrawn, air bubbles\n\n\nJP11\nMale\n24.40\n2.3\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n1899-12-31 18:45:00\nNA\nNA\nNA\nNA\ninjection post mortem\n\n\nJP12\nMale\n25.30\n2.3\n1x\n320 mg Ba/ml\n17\n0.2\n0.50\n5.0\n1899-12-31 20:44:00\nNA\nNA\nNA\nNA\ninjection post mortem\n\n\nJP13\nMale\n24.70\n2.2\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n5.0\n1899-12-31 11:14:00\n0.50\n5\n1899-12-31 12:15:00\nNA\npoor life signs after first injection; mouse dies within 6 min of second injection\n\n\nJP14\nMale\n27.00\n2.2\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1900-01-13 09:07:12\n0.50\n2.5\n1899-12-31 14:49:00\nNA\nramp up from 0.02 ul/min to 0.5 ul/min during 60 s; between injections 0.02 ul/min; mouse recovers better after start of injection. 4th ventricle difficult, but probably because of the chp\n\n\nJP15\nMale\n24.00\n2.2\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 16:24:00\n0.50\n2.5\n1899-12-31 17:26:00\nNA\nramp up from 0.02 ul/min to 0.5 ul/min during 60 s\n\n\nJP16\nMale\n25.80\n2.2\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 20:10:00\n0.50\n2.5\n1899-12-31 21:14:00\nNA\nramp up from 0.02 ul/min to 0.5 ul/min during 60 s; second injection in the dead mouse\n\n\nJP17\nMale\n26.40\n2.2\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 22:58:00\n0.50\n2.5\n1899-12-31 23:40:00\nNA\nramp up from 0.02 ul/min to 0.5 ul/min during 60 s; at second injection mouse was already dying; injection killed it quickly\n\n\nJP18\nMale\n26.60\n2.2\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 10:01:00\nNA\nNA\nNA\nNA\nmouse starts dying 15 min after injection\n\n\nJP19\nMale\n26.90\n2.2\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 12:54:00\nNA\nNA\nNA\nNA\nmouse starts dying 16 min after injection\n\n\nJP20\nMale\n26.20\n2.2\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 15:39:00\n0.50\n2.5\n1899-12-31 16:35:00\nNA\nmouse starts dying 20 min after second injection\n\n\nJP21\nFemale\n21.00\n2.2\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 17:53:00\nNA\nNA\nNA\nNA\nramp up from 0.02 ul/min to 0.25 ul/min during 60 s; between injections 0.02 ul/min\n\n\nJP22\nFemale\n19.50\n2.2\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 20:48:00\n0.25\n2.5\n1899-12-31 22:31:00\nNA\nsecond injection no ramp up, observed in the spine\n\n\nJP23\nFemale\n19.60\n2.2\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 23:28:00\nNA\nNA\nNA\nNA\ninjection in parenchyma\n\n\nJP24\nFemale\n19.56\n2.3\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 11:20:00\nNA\nNA\nNA\nNA\ncontrast agent didn't go in\n\n\nJP25\nFemale\n19.63\n2.3\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 13:10:00\nNA\nNA\nNA\nNA\ninjection in parenchyma\n\n\nJP26\nFemale\n19.71\n2.3\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 16:58:00\nNA\nNA\nNA\nNA\nbest animal so far\n\n\nJP27\nFemale\n19.20\n2.2\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 20:04:00\nNA\nNA\nNA\nNA\nmouse dead at mounting; inject post mortem\n\n\nJP28\nFemale\n20.20\n2.2\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 22:19:00\n0.25\n5\n1899-12-31 00:06:00\nNA\ngood; second injection interrupted\n\n\nJP29\nFemale\n18.60\n2.2\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 09:53:00\nNA\nNA\nNA\nNA\ngood\n\n\nJP30\nFemale\n19.03\n2.2\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 12:11:00\n0.25\nca. 2.5\n1899-12-31 13:47:00\nNA\ngood; not all of second injection covered by scans\n\n\nJP31\nFemale\n20.50\n2.2\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n1899-12-31 14:42:00\nNA\nNA\nNA\nNA\ngood; but mouse died 25 min. after injection\n\n\nJP32\nFemale\n20.20\n2.2\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n1899-12-31 16:49:00\n0.25\nca. 2.5\n1899-12-31 18:28:00\nNA\ngood\n\n\nJP33\nFemale\n21.20\n2.2\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n1899-12-31 19:11:00\n0.25\nca. 2.5\n1899-12-31 20:47:00\nNA\ngood\n\n\nJP34\nFemale\n19.21\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nno contrast agent"
  },
  {
    "objectID": "Table_gather_filenames.html",
    "href": "Table_gather_filenames.html",
    "title": "Generate metadata table from folder content",
    "section": "",
    "text": "Codelibrary(purrr)\n \n# paths\ndirinput &lt;- file.path(dirname(dirname(getwd())), '_data','SPring','Images')\n\n#find relevant files \nfiles &lt;- dir(dirinput)\next &lt;- '.jpg'\nfiles &lt;- files[grepl(paste0('*',ext,'$'),files)]\n\n# Table with filename parts\n#-------------------------------\ntbl &lt;- as.data.frame(files)\n# new columns\ntbl$subjID &lt;- ''\ntbl$status &lt;- ''\ntbl$scanID &lt;- ''\ntbl$desc &lt;- ''\ntbl$recon &lt;- ''\n\n# Separate extension and first part ('_' separated)\nbasenames &lt;- sapply(strsplit(tbl$files, ext), '[[', 1) # strip extension \nbasenames_firstpart &lt;- sapply(strsplit(basenames,'_'),'[[',1)# split by underscore \n\n# Loop thru rows\nfor (r in 1:nrow(tbl)){\n  # Files starting with JP* it contains subject data with meaningful nameparts\n  if  (grepl('^JP*',tbl$files[r])) {\n      tbl$subjID[r] &lt;- strsplit(basenames_firstpart[r],'-')[[1]][1] #1st element splitted by '-'\n      tbl$status[r] &lt;- strsplit(basenames_firstpart[r],'-')[[1]][2] #2nd element splitted by '-'\n      tbl$scanID[r] &lt;- strsplit(basenames_firstpart[r],'-')[[1]][3] #...\n      tbl$desc[r] &lt;- strsplit(basenames_firstpart[r],'-')[[1]][4] #\n      \n      tbl$recon[r] &lt;- strsplit(basenames[r],'^.*_')[[1]][2] # last element after '_'\n  \n  } else {\n    tbl$subjID[r] &lt;- 'N/A'\n  }\n}\n\n# Add HTML code so that pictures will be rendered in the table \n# ----------------------------------------------------------------\npic_fullpath &lt;- file.path('https://gitlab.uzh.ch/crsuzh/afford_page/-/blob/master/_data/SPring/Images',tbl$files)\npic_relpath &lt;- file.path(dirinput,tbl$files)\ntbl$pic &lt;- paste0('&lt;a href=\\'', pic_fullpath,'\\' target=\\'_blank\\'&gt;', \n                       '&lt;img src=\\'',pic_relpath, '\\' height=\\'70\\'&gt;&lt;/a&gt;')\n\n\n\n# Sort: rows with subjects first\ntbl &lt;- tbl[order(tbl$subjID),] \n\n\nWe have a folder with preview data files (thumbnail pictures). Their filename parts encode our key variable Subject ID that can be matched to the same variable in the table with subject information. Other parts of the file name encode different attributes of the file content (e.g., dead or in-vivo). The filename parts are split into columns of a table using ‘-’ and ’_’ separators.\n\n\n\n\n\n\nImportant: filenaming conventions\n\n\n\nA consistent filenaming scheme will facilitate the process of generating metadata tables based on filename and foldername separators.\n\n\n\nThe generated table has 762 rows and 7 columns.\n\n\n\n\n\n\n Back to top"
  },
  {
    "objectID": "Table_read_file.html#input-file-and-sheet",
    "href": "Table_read_file.html#input-file-and-sheet",
    "title": "Read tables from file",
    "section": "",
    "text": "First we need to load some libraries. The packages should have been installed before. For example, install.packages().\n\n# Required libraries\nlibrary(readxl)     # for reading excel (another package is openxlsx) \nlibrary(dplyr)      # data manipulation grammar like the pipe %&gt;%, join operations, \nlibrary(kableExtra) # to render simple and pretty static tables \n\nThen we specify the fullpath of the excel file. Note that we use the path relative to this R Quarto project. The location of the R quarto project file is defined by getwd(). By using file.path() to specify the path we avoid hardcoding the folder separators increasing interoperability across operating systems.\nThen we read the content of a specific sheet in the file using read_excel(). Note that there are several R packages to read excel\n\n# Read file\nfileinput &lt;- file.path(getwd(),'example_data','Example_subject_info.xlsx')\ntbl_subj &lt;- readxl::read_excel(fileinput, sheet='Control_room_sheet')"
  },
  {
    "objectID": "Table_read_file.html#make-ammendments",
    "href": "Table_read_file.html#make-ammendments",
    "title": "Read tables from file",
    "section": "Make ammendments",
    "text": "Make ammendments"
  },
  {
    "objectID": "Table_read_file.html#checking-the-result",
    "href": "Table_read_file.html#checking-the-result",
    "title": "Read tables from file",
    "section": "Checking the result",
    "text": "Checking the result\nThere are several things to check and several ways of doing it.\n\n\n\n\n\n\nWarning\n\n\n\nChecking that the dimensions of your table is the same as in excel in not enough!\n\n\nDisplay object structure\nCheck dimensions, object type, variable names and data types You can use str() to display the internal structure of the object created when reading the file. The first line of the output specifies [n rows x n columns] and the type of object (e.g., data frame) and it then lists each variable, their data type (e.g., num = numeric, chr = characters), dimensions and show content of a first cases. There are many options in the function to adapt the output if you have large data set, for example, limiting the number of characters, as in the example.\n\nstr(tbl_subj, nchar.max = 35)\n\ntibble [34 × 15] (S3: tbl_df/tbl/data.frame)\n $ Name                        : chr [1:34] \"JP01\" \"JP02\" \"JP03\" \"JP04\" ...\n $ Sex                         : chr [1:34] \"Male\" \"Male\" \"Male\" \"Female\" ...\n $ Body weight [g]             : num [1:34] 27.5 26.6 27.5 20.2 | __truncated__ ...\n $ Cannula length (mm)         : chr [1:34] \"2.2999999999999998\" \"2.2999999999999998\" \"2.2999999999999998\" \"2.2999999999999998\" ...\n $ Dilution                    : chr [1:34] \"1.5x\" \"1.5x\" \"1.5x\" \"1.5x\" ...\n $ Concentration               : chr [1:34] \"480 mg Ba/ml\" \"480 mg Ba/ml\" \"480 mg Ba/ml\" \"480 mg Ba/ml\" ...\n $ Withdrawn CA in syringe (uL): num [1:34] 5 5 5 5 5 5 5 5 17 17 ...\n $ Infused CA in mannitol (uL) : num [1:34] NA NA NA NA NA NA NA NA 0.2 0.2 ...\n $ Injection 1 rate (uL/min)   : num [1:34] 0.1 0.1 0.1 0.1 0.1 | __truncated__ ...\n $ Injection 1 volume (uL)     : num [1:34] 2.5 2.5 2.5 2.5 2.5 2.5 2.5 2.5 5 5 ...\n $ Injection 1 JP time (HH:MM) : POSIXct[1:34], format: \"1899-12-31 15:05:00\" \"1899-12-31 18:16:00\" ...\n $ Injection 2 rate (uL/min)   : num [1:34] NA NA NA NA NA NA NA NA NA NA ...\n $ Injection 2 volume (uL)     : chr [1:34] NA NA NA NA ...\n $ Injection 2 JP time (HH:MM) : POSIXct[1:34], format: NA NA ...\n $ Bubbles?                    : logi [1:34] NA NA NA NA NA NA ...\n\n\nRender the table\nAn option when working with an IDE (e.g., Rstudio) is usually click on the variable and a window will allow to navigate the table. In documents like this you can use kable() to render the table. In this case we add a scroll box to make it compact.\n\nknitr::kable(\n  tbl_subj\n) %&gt;%\n  kable_paper(bootstrap_options = c(\"basic\",\"hover\")) %&gt;%\n  scroll_box(height= \"400px\")\n\n\n\n\nName\nSex\nBody weight [g]\nCannula length (mm)\nDilution\nConcentration\nWithdrawn CA in syringe (uL)\nInfused CA in mannitol (uL)\nInjection 1 rate (uL/min)\nInjection 1 volume (uL)\nInjection 1 JP time (HH:MM)\nInjection 2 rate (uL/min)\nInjection 2 volume (uL)\nInjection 2 JP time (HH:MM)\nBubbles?\n\n\n\nJP01\nMale\n27.50\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 15:05:00\nNA\nNA\nNA\nNA\n\n\nJP02\nMale\n26.60\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 18:16:00\nNA\nNA\nNA\nNA\n\n\nJP03\nMale\n27.50\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 20:55:00\nNA\nNA\nNA\nNA\n\n\nJP04\nFemale\n20.20\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 11:15:00\nNA\nNA\nNA\nNA\n\n\nJP05\nFemale\n20.20\n2.2000000000000002\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 15:01:00\nNA\nNA\nNA\nNA\n\n\nJP06\nFemale\n20.30\n2.2000000000000002\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\nNA\nNA\nNA\nNA\nNA\n\n\nJP07\nMale\n26.40\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 17:00:00\nNA\nNA\nNA\nNA\n\n\nJP08\nMale\n24.60\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 12:45:00\nNA\nNA\nNA\nNA\n\n\nJP09\nMale\n26.80\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n1899-12-31 13:56:00\nNA\nNA\nNA\nNA\n\n\nJP10\nMale\n25.70\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n1899-12-31 16:33:00\nNA\nNA\nNA\nNA\n\n\nJP11\nMale\n24.40\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n1899-12-31 18:45:00\nNA\nNA\nNA\nNA\n\n\nJP12\nMale\n25.30\n2.2999999999999998\n1x\n320 mg Ba/ml\n17\n0.2\n0.50\n5.0\n1899-12-31 20:44:00\nNA\nNA\nNA\nNA\n\n\nJP13\nMale\n24.70\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n5.0\n1899-12-31 11:14:00\n0.50\n5\n1899-12-31 12:15:00\nNA\n\n\nJP14\nMale\n27.00\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1900-01-13 09:07:12\n0.50\n2.5\n1899-12-31 14:49:00\nNA\n\n\nJP15\nMale\n24.00\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 16:24:00\n0.50\n2.5\n1899-12-31 17:26:00\nNA\n\n\nJP16\nMale\n25.80\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 20:10:00\n0.50\n2.5\n1899-12-31 21:14:00\nNA\n\n\nJP17\nMale\n26.40\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 22:58:00\n0.50\n2.5\n1899-12-31 23:40:00\nNA\n\n\nJP18\nMale\n26.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 10:01:00\nNA\nNA\nNA\nNA\n\n\nJP19\nMale\n26.90\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 12:54:00\nNA\nNA\nNA\nNA\n\n\nJP20\nMale\n26.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 15:39:00\n0.50\n2.5\n1899-12-31 16:35:00\nNA\n\n\nJP21\nFemale\n21.00\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 17:53:00\nNA\nNA\nNA\nNA\n\n\nJP22\nFemale\n19.50\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 20:48:00\n0.25\n2.5\n1899-12-31 22:31:00\nNA\n\n\nJP23\nFemale\n19.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 23:28:00\nNA\nNA\nNA\nNA\n\n\nJP24\nFemale\n19.56\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 11:20:00\nNA\nNA\nNA\nNA\n\n\nJP25\nFemale\n19.63\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 13:10:00\nNA\nNA\nNA\nNA\n\n\nJP26\nFemale\n19.71\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 16:58:00\nNA\nNA\nNA\nNA\n\n\nJP27\nFemale\n19.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 20:04:00\nNA\nNA\nNA\nNA\n\n\nJP28\nFemale\n20.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 22:19:00\n0.25\n5\n1899-12-31 00:06:00\nNA\n\n\nJP29\nFemale\n18.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 09:53:00\nNA\nNA\nNA\nNA\n\n\nJP30\nFemale\n19.03\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 12:11:00\n0.25\nca. 2.5\n1899-12-31 13:47:00\nNA\n\n\nJP31\nFemale\n20.50\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n1899-12-31 14:42:00\nNA\nNA\nNA\nNA\n\n\nJP32\nFemale\n20.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n1899-12-31 16:49:00\n0.25\nca. 2.5\n1899-12-31 18:28:00\nNA\n\n\nJP33\nFemale\n21.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n1899-12-31 19:11:00\n0.25\nca. 2.5\n1899-12-31 20:47:00\nNA\n\n\nJP34\nFemale\n19.21\ntxt\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA"
  },
  {
    "objectID": "Table_read_file.html#checking-the-results",
    "href": "Table_read_file.html#checking-the-results",
    "title": "Read tables from file",
    "section": "Checking the results",
    "text": "Checking the results\nWhen reading a table with code you should always check for unexpected behavior like omission of rows or column, or incorrect formatting. There are several ways of doing this.\n\n\n\n\n\n\nWarning\n\n\n\nJust checking that the dimensions of your table is the same as in excel in not enough! See below\n\n\nExamine the structure of the read object\nCheck dimensions, object type, variable names and data types. You can use str() to display the internal structure of the object created when reading the file. The first line of the output specifies [n rows x n columns], type of object (e.g., data frame). The list also show data type (e.g., num = numeric, chr = characters) , dimensions and a few cases for each variable. If you have a large data set you can limit the number of output characters:\n\nstr(tbl_subj, nchar.max = 35)\n\ntibble [34 × 15] (S3: tbl_df/tbl/data.frame)\n $ Name                        : chr [1:34] \"JP01\" \"JP02\" \"JP03\" \"JP04\" ...\n $ Sex                         : chr [1:34] \"Male\" \"Male\" \"Male\" \"Female\" ...\n $ Body weight [g]             : num [1:34] 27.5 26.6 27.5 20.2 | __truncated__ ...\n $ Cannula length (mm)         : chr [1:34] \"2.2999999999999998\" \"2.2999999999999998\" \"2.2999999999999998\" \"2.2999999999999998\" ...\n $ Dilution                    : chr [1:34] \"1.5x\" \"1.5x\" \"1.5x\" \"1.5x\" ...\n $ Concentration               : chr [1:34] \"480 mg Ba/ml\" \"480 mg Ba/ml\" \"480 mg Ba/ml\" \"480 mg Ba/ml\" ...\n $ Withdrawn CA in syringe (uL): num [1:34] 5 5 5 5 5 5 5 5 17 17 ...\n $ Infused CA in mannitol (uL) : num [1:34] NA NA NA NA NA NA NA NA 0.2 0.2 ...\n $ Injection 1 rate (uL/min)   : num [1:34] 0.1 0.1 0.1 0.1 0.1 | __truncated__ ...\n $ Injection 1 volume (uL)     : num [1:34] 2.5 2.5 2.5 2.5 2.5 2.5 2.5 2.5 5 5 ...\n $ Injection 1 JP time (HH:MM) : chr [1:34] \"0.62847222222222221\" \"0.76111111111111107\" \"0.87152777777777779\" \"0.46875\" ...\n $ Injection 2 rate (uL/min)   : num [1:34] NA NA NA NA NA NA NA NA NA NA ...\n $ Injection 2 volume (uL)     : chr [1:34] NA NA NA NA ...\n $ Injection 2 JP time (HH:MM) : chr [1:34] NA NA NA NA ...\n $ Bubbles?                    : logi [1:34] NA NA NA NA NA NA ...\n\n\nRender the table\nAn option when working with an IDE (e.g., Rstudio) is usually click on the variable and a window will allow to navigate the table. In documents like this you can use kable() to render the table. In this case we add a scroll box to make it compact.\n\nknitr::kable(\n  tbl_subj\n) %&gt;%\n  kable_paper(bootstrap_options = c(\"basic\",\"hover\")) %&gt;%\n  scroll_box(height= \"400px\")\n\n\n\n\nName\nSex\nBody weight [g]\nCannula length (mm)\nDilution\nConcentration\nWithdrawn CA in syringe (uL)\nInfused CA in mannitol (uL)\nInjection 1 rate (uL/min)\nInjection 1 volume (uL)\nInjection 1 JP time (HH:MM)\nInjection 2 rate (uL/min)\nInjection 2 volume (uL)\nInjection 2 JP time (HH:MM)\nBubbles?\n\n\n\nJP01\nMale\n27.50\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.62847222222222221\nNA\nNA\nNA\nNA\n\n\nJP02\nMale\n26.60\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.76111111111111107\nNA\nNA\nNA\nNA\n\n\nJP03\nMale\n27.50\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.87152777777777779\nNA\nNA\nNA\nNA\n\n\nJP04\nFemale\n20.20\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.46875\nNA\nNA\nNA\nNA\n\n\nJP05\nFemale\n20.20\n2.2000000000000002\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.62569444444444444\nNA\nNA\nNA\nNA\n\n\nJP06\nFemale\n20.30\n2.2000000000000002\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\nNA\nNA\nNA\nNA\nNA\n\n\nJP07\nMale\n26.40\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.70833333333333337\nNA\nNA\nNA\nNA\n\n\nJP08\nMale\n24.60\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.53125\nNA\nNA\nNA\nNA\n\n\nJP09\nMale\n26.80\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.5805555555555556\nNA\nNA\nNA\nNA\n\n\nJP10\nMale\n25.70\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.68958333333333333\nNA\nNA\nNA\nNA\n\n\nJP11\nMale\n24.40\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.78125\nNA\nNA\nNA\nNA\n\n\nJP12\nMale\n25.30\n2.2999999999999998\n1x\n320 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.86388888888888893\nNA\nNA\nNA\nNA\n\n\nJP13\nMale\n24.70\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n5.0\n0.4680555555555555\n0.50\n5\n0.51041666666666663\nNA\n\n\nJP14\nMale\n27.00\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n13.38\n0.50\n2.5\n0.61736111111111114\nNA\n\n\nJP15\nMale\n24.00\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.68333333333333324\n0.50\n2.5\n0.72638888888888886\nNA\n\n\nJP16\nMale\n25.80\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.84027777777777779\n0.50\n2.5\n0.8847222222222223\nNA\n\n\nJP17\nMale\n26.40\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.95694444444444438\n0.50\n2.5\n0.98611111111111116\nNA\n\n\nJP18\nMale\n26.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.41736111111111113\nNA\nNA\nNA\nNA\n\n\nJP19\nMale\n26.90\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.53749999999999998\nNA\nNA\nNA\nNA\n\n\nJP20\nMale\n26.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.65208333333333335\n0.50\n2.5\n0.69097222222222221\nNA\n\n\nJP21\nFemale\n21.00\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.74513888888888891\nNA\nNA\nNA\nNA\n\n\nJP22\nFemale\n19.50\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.8666666666666667\n0.25\n2.5\n0.93819444444444444\nNA\n\n\nJP23\nFemale\n19.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.97777777777777775\nNA\nNA\nNA\nNA\n\n\nJP24\nFemale\n19.56\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.47222222222222227\nNA\nNA\nNA\nNA\n\n\nJP25\nFemale\n19.63\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.54861111111111105\nNA\nNA\nNA\nNA\n\n\nJP26\nFemale\n19.71\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.70694444444444438\nNA\nNA\nNA\nNA\n\n\nJP27\nFemale\n19.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.83611111111111114\nNA\nNA\nNA\nNA\n\n\nJP28\nFemale\n20.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.92986111111111114\n0.25\n5\n4.1666666666666666E-3\nNA\n\n\nJP29\nFemale\n18.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.41180555555555554\nNA\nNA\nNA\nNA\n\n\nJP30\nFemale\n19.03\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.50763888888888886\n0.25\nca. 2.5\n0.57430555555555551\nNA\n\n\nJP31\nFemale\n20.50\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n0.61249999999999993\nNA\nNA\nNA\nNA\n\n\nJP32\nFemale\n20.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n0.7006944444444444\n0.25\nca. 2.5\n0.76944444444444438\nNA\n\n\nJP33\nFemale\n21.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n0.7993055555555556\n0.25\nca. 2.5\n0.86597222222222225\nNA\n\n\nJP34\nFemale\n19.21\nN/A\nNA\nNA\nNA\nNA\nNA\nNA\nN/A\nNA\nNA\nN/A\nNA"
  },
  {
    "objectID": "Table_read_file.html#read-input-file",
    "href": "Table_read_file.html#read-input-file",
    "title": "Read tables from file",
    "section": "Read input file",
    "text": "Read input file\nFirst we need to load some libraries. The packages containing these libraries should have been installed before using install.packages().\n\nlibrary(readxl)     # for reading excel (another package is openxlsx) \nlibrary(dplyr)      # data manipulation grammar like the pipe %&gt;%, join operations, \nlibrary(kableExtra) # to render simple and pretty static tables \n\nThen we specify the fullpath of the excel file. For this we use the path relative to this R Quarto project. The location of the R quarto project file is defined by getwd(). By using file.path() to specify the path we avoid hardcoding the folder separators increasing interoperability across operating systems.\n\nfileinput &lt;- file.path(getwd(),'example_data','Example_subject_info.xlsx')\n\nThen we read the content of a specific sheet in the file using read_excel() of the package readxl. There are several R packages to read excel to do this, we chose this package as it seems to be good at interacting with series of packages (interoperability).\n\ntbl_subj &lt;- readxl::read_excel(fileinput, sheet='Control_room_sheet')"
  },
  {
    "objectID": "Table_read_file.html#checking-the-read-table",
    "href": "Table_read_file.html#checking-the-read-table",
    "title": "Read tables from file",
    "section": "Checking the read table",
    "text": "Checking the read table\nWhen reading a table with code you should always check for unexpected behavior like omission of rows or column, or incorrect formatting. There are several ways of doing this.\n\n\n\n\n\n\nWarning\n\n\n\nJust checking that the dimensions of your table is the same as in excel in not enough! See below\n\n\nExamine the structure of the read object\nCheck dimensions, object type, variable names and data types. You can use str() to display the internal structure of the object created when reading the file. The first line of the output specifies [n rows x n columns], type of object (e.g., data frame). The list also show data type (e.g., num = numeric, chr = characters) , dimensions and a few cases for each variable. If you have a large data set you can limit the number of output characters.\n\nstr(tbl_subj, nchar.max = 35)\n\ntibble [34 × 15] (S3: tbl_df/tbl/data.frame)\n $ Name                        : chr [1:34] \"JP01\" \"JP02\" \"JP03\" \"JP04\" ...\n $ Sex                         : chr [1:34] \"Male\" \"Male\" \"Male\" \"Female\" ...\n $ Body weight [g]             : num [1:34] 27.5 26.6 27.5 20.2 | __truncated__ ...\n $ Cannula length (mm)         : chr [1:34] \"2.2999999999999998\" \"2.2999999999999998\" \"2.2999999999999998\" \"2.2999999999999998\" ...\n $ Dilution                    : chr [1:34] \"1.5x\" \"1.5x\" \"1.5x\" \"1.5x\" ...\n $ Concentration               : chr [1:34] \"480 mg Ba/ml\" \"480 mg Ba/ml\" \"480 mg Ba/ml\" \"480 mg Ba/ml\" ...\n $ Withdrawn CA in syringe (uL): num [1:34] 5 5 5 5 5 5 5 5 17 17 ...\n $ Infused CA in mannitol (uL) : num [1:34] NA NA NA NA NA NA NA NA 0.2 0.2 ...\n $ Injection 1 rate (uL/min)   : num [1:34] 0.1 0.1 0.1 0.1 0.1 | __truncated__ ...\n $ Injection 1 volume (uL)     : num [1:34] 2.5 2.5 2.5 2.5 2.5 2.5 2.5 2.5 5 5 ...\n $ Injection 1 JP time (HH:MM) : chr [1:34] \"0.62847222222222221\" \"0.76111111111111107\" \"0.87152777777777779\" \"0.46875\" ...\n $ Injection 2 rate (uL/min)   : num [1:34] NA NA NA NA NA NA NA NA NA NA ...\n $ Injection 2 volume (uL)     : chr [1:34] NA NA NA NA ...\n $ Injection 2 JP time (HH:MM) : chr [1:34] NA NA NA NA ...\n $ Bubbles?                    : logi [1:34] NA NA NA NA NA NA ...\n\n\nRender the table\nTo inspect the table, we usually work with an Integrated Development Environment like (e.g., Rstudio) where we can click on a variable and a window will allow to navigate the table. But to render the table in documents like this, recommended good for sharing, you can use kable() to render the table. In this example we also add a scroll box to make it compact.\n\nknitr::kable(\n  tbl_subj\n) %&gt;%\n  kable_paper(bootstrap_options = c(\"basic\",\"hover\")) %&gt;%\n  scroll_box(height= \"400px\")\n\n\n\n\nName\nSex\nBody weight [g]\nCannula length (mm)\nDilution\nConcentration\nWithdrawn CA in syringe (uL)\nInfused CA in mannitol (uL)\nInjection 1 rate (uL/min)\nInjection 1 volume (uL)\nInjection 1 JP time (HH:MM)\nInjection 2 rate (uL/min)\nInjection 2 volume (uL)\nInjection 2 JP time (HH:MM)\nBubbles?\n\n\n\nJP01\nMale\n27.50\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.62847222222222221\nNA\nNA\nNA\nNA\n\n\nJP02\nMale\n26.60\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.76111111111111107\nNA\nNA\nNA\nNA\n\n\nJP03\nMale\n27.50\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.87152777777777779\nNA\nNA\nNA\nNA\n\n\nJP04\nFemale\n20.20\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.46875\nNA\nNA\nNA\nNA\n\n\nJP05\nFemale\n20.20\n2.2000000000000002\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.62569444444444444\nNA\nNA\nNA\nNA\n\n\nJP06\nFemale\n20.30\n2.2000000000000002\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\nNA\nNA\nNA\nNA\nNA\n\n\nJP07\nMale\n26.40\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.70833333333333337\nNA\nNA\nNA\nNA\n\n\nJP08\nMale\n24.60\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.53125\nNA\nNA\nNA\nNA\n\n\nJP09\nMale\n26.80\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.5805555555555556\nNA\nNA\nNA\nNA\n\n\nJP10\nMale\n25.70\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.68958333333333333\nNA\nNA\nNA\nNA\n\n\nJP11\nMale\n24.40\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.78125\nNA\nNA\nNA\nNA\n\n\nJP12\nMale\n25.30\n2.2999999999999998\n1x\n320 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.86388888888888893\nNA\nNA\nNA\nNA\n\n\nJP13\nMale\n24.70\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n5.0\n0.4680555555555555\n0.50\n5\n0.51041666666666663\nNA\n\n\nJP14\nMale\n27.00\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n13.38\n0.50\n2.5\n0.61736111111111114\nNA\n\n\nJP15\nMale\n24.00\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.68333333333333324\n0.50\n2.5\n0.72638888888888886\nNA\n\n\nJP16\nMale\n25.80\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.84027777777777779\n0.50\n2.5\n0.8847222222222223\nNA\n\n\nJP17\nMale\n26.40\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.95694444444444438\n0.50\n2.5\n0.98611111111111116\nNA\n\n\nJP18\nMale\n26.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.41736111111111113\nNA\nNA\nNA\nNA\n\n\nJP19\nMale\n26.90\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.53749999999999998\nNA\nNA\nNA\nNA\n\n\nJP20\nMale\n26.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.65208333333333335\n0.50\n2.5\n0.69097222222222221\nNA\n\n\nJP21\nFemale\n21.00\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.74513888888888891\nNA\nNA\nNA\nNA\n\n\nJP22\nFemale\n19.50\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.8666666666666667\n0.25\n2.5\n0.93819444444444444\nNA\n\n\nJP23\nFemale\n19.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.97777777777777775\nNA\nNA\nNA\nNA\n\n\nJP24\nFemale\n19.56\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.47222222222222227\nNA\nNA\nNA\nNA\n\n\nJP25\nFemale\n19.63\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.54861111111111105\nNA\nNA\nNA\nNA\n\n\nJP26\nFemale\n19.71\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.70694444444444438\nNA\nNA\nNA\nNA\n\n\nJP27\nFemale\n19.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.83611111111111114\nNA\nNA\nNA\nNA\n\n\nJP28\nFemale\n20.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.92986111111111114\n0.25\n5\n4.1666666666666666E-3\nNA\n\n\nJP29\nFemale\n18.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.41180555555555554\nNA\nNA\nNA\nNA\n\n\nJP30\nFemale\n19.03\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.50763888888888886\n0.25\nca. 2.5\n0.57430555555555551\nNA\n\n\nJP31\nFemale\n20.50\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n0.61249999999999993\nNA\nNA\nNA\nNA\n\n\nJP32\nFemale\n20.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n0.7006944444444444\n0.25\nca. 2.5\n0.76944444444444438\nNA\n\n\nJP33\nFemale\n21.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n0.7993055555555556\n0.25\nca. 2.5\n0.86597222222222225\nNA\n\n\nJP34\nFemale\n19.21\nN/A\nNA\nNA\nNA\nNA\nNA\nNA\nN/A\nNA\nNA\nN/A\nNA\n\n\n\n\n\n\n\nIssues\nHere we can already observe some unexpected issues. The errors in this example are not uncommon when we are given a table:\n\nThe variable ‘Cannula length (mm)’ would be expected to be numeric but it is read as character (chr) and the number format seems odd , with too many decimals\nThe variables ‘Injection 1 JP time (HH:MM)’ and ‘Injection 2 JP time (HH:MM)’ do not fullfill the format indicated in the variable name, of two groups of 2 digits separated by colon.\nWe note that there are missing values (NA), those are the blank cells in the excel file.\nNote: str() make give output like __truncated__ to indicate that not all the cases are displayed on the screen. This is just for display and it doesn’t mean that text is in the table or that the full column was not read."
  },
  {
    "objectID": "Table_read_file.html#render-the-table",
    "href": "Table_read_file.html#render-the-table",
    "title": "Read tables from file",
    "section": "Render the table",
    "text": "Render the table\nTo inspect the table, we usually work with an Integrated Development Environment like (e.g., Rstudio) where we can click on a variable and a window will allow to navigate the table. But to render the table in documents like this, recommended good for sharing, you can use kable() to render the table. In this example we also add a scroll box to make it compact.\n\nknitr::kable(\n  tbl_subj\n) %&gt;%\n  kable_paper(bootstrap_options = c(\"basic\",\"hover\")) %&gt;%\n  scroll_box(height= \"400px\")\n\n\n\n\nName\nSex\nBody weight [g]\nCannula length (mm)\nDilution\nConcentration\nWithdrawn CA in syringe (uL)\nInfused CA in mannitol (uL)\nInjection 1 rate (uL/min)\nInjection 1 volume (uL)\nInjection 1 JP time (HH:MM)\nInjection 2 rate (uL/min)\nInjection 2 volume (uL)\nInjection 2 JP time (HH:MM)\nBubbles?\n\n\n\nJP01\nMale\n27.50\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.62847222222222221\nNA\nNA\nNA\nNA\n\n\nJP02\nMale\n26.60\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.76111111111111107\nNA\nNA\nNA\nNA\n\n\nJP03\nMale\n27.50\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.87152777777777779\nNA\nNA\nNA\nNA\n\n\nJP04\nFemale\n20.20\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.46875\nNA\nNA\nNA\nNA\n\n\nJP05\nFemale\n20.20\n2.2000000000000002\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.62569444444444444\nNA\nNA\nNA\nNA\n\n\nJP06\nFemale\n20.30\n2.2000000000000002\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\nNA\nNA\nNA\nNA\nNA\n\n\nJP07\nMale\n26.40\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.70833333333333337\nNA\nNA\nNA\nNA\n\n\nJP08\nMale\n24.60\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.53125\nNA\nNA\nNA\nNA\n\n\nJP09\nMale\n26.80\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.5805555555555556\nNA\nNA\nNA\nNA\n\n\nJP10\nMale\n25.70\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.68958333333333333\nNA\nNA\nNA\nNA\n\n\nJP11\nMale\n24.40\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.78125\nNA\nNA\nNA\nNA\n\n\nJP12\nMale\n25.30\n2.2999999999999998\n1x\n320 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.86388888888888893\nNA\nNA\nNA\nNA\n\n\nJP13\nMale\n24.70\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n5.0\n0.4680555555555555\n0.50\n5\n0.51041666666666663\nNA\n\n\nJP14\nMale\n27.00\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n13.38\n0.50\n2.5\n0.61736111111111114\nNA\n\n\nJP15\nMale\n24.00\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.68333333333333324\n0.50\n2.5\n0.72638888888888886\nNA\n\n\nJP16\nMale\n25.80\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.84027777777777779\n0.50\n2.5\n0.8847222222222223\nNA\n\n\nJP17\nMale\n26.40\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.95694444444444438\n0.50\n2.5\n0.98611111111111116\nNA\n\n\nJP18\nMale\n26.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.41736111111111113\nNA\nNA\nNA\nNA\n\n\nJP19\nMale\n26.90\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.53749999999999998\nNA\nNA\nNA\nNA\n\n\nJP20\nMale\n26.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.65208333333333335\n0.50\n2.5\n0.69097222222222221\nNA\n\n\nJP21\nFemale\n21.00\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.74513888888888891\nNA\nNA\nNA\nNA\n\n\nJP22\nFemale\n19.50\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.8666666666666667\n0.25\n2.5\n0.93819444444444444\nNA\n\n\nJP23\nFemale\n19.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.97777777777777775\nNA\nNA\nNA\nNA\n\n\nJP24\nFemale\n19.56\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.47222222222222227\nNA\nNA\nNA\nNA\n\n\nJP25\nFemale\n19.63\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.54861111111111105\nNA\nNA\nNA\nNA\n\n\nJP26\nFemale\n19.71\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.70694444444444438\nNA\nNA\nNA\nNA\n\n\nJP27\nFemale\n19.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.83611111111111114\nNA\nNA\nNA\nNA\n\n\nJP28\nFemale\n20.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.92986111111111114\n0.25\n5\n4.1666666666666666E-3\nNA\n\n\nJP29\nFemale\n18.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.41180555555555554\nNA\nNA\nNA\nNA\n\n\nJP30\nFemale\n19.03\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.50763888888888886\n0.25\nca. 2.5\n0.57430555555555551\nNA\n\n\nJP31\nFemale\n20.50\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n0.61249999999999993\nNA\nNA\nNA\nNA\n\n\nJP32\nFemale\n20.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n0.7006944444444444\n0.25\nca. 2.5\n0.76944444444444438\nNA\n\n\nJP33\nFemale\n21.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n0.7993055555555556\n0.25\nca. 2.5\n0.86597222222222225\nNA\n\n\nJP34\nFemale\n19.21\nN/A\nNA\nNA\nNA\nNA\nNA\nNA\nN/A\nNA\nNA\nN/A\nNA\n\n\n\n\n\n\n\nHere we can already observe some unexpected issues:\n\nThe variable ‘Cannula length (mm)’ would be expected to be numeric but it is read as character (chr) and the number format seems odd , with too many decimals\nThe variables ‘Injection 1 JP time (HH:MM)’ and ‘Injection 2 JP time (HH:MM)’ do not fullfill the format indicated in the variable name, of two groups of 2 digits separated by colon.\nWe note that there are missing values (NA), those are the blank cells in the excel file.\nNote: str() make give output like __truncated__ to indicate that not all the cases are displayed on the screen. This is just for display and it doesn’t mean that text is in the table or that the full column was not read."
  },
  {
    "objectID": "Table_read_file.html#checking-if-the-table-was-read-correctly",
    "href": "Table_read_file.html#checking-if-the-table-was-read-correctly",
    "title": "Read tables from file",
    "section": "Checking if the table was read correctly",
    "text": "Checking if the table was read correctly\nWhen reading a table with code you should always check for unexpected behavior like omission of rows or column, or incorrect formatting. There are several ways of doing this.\n\n\n\n\n\n\nWarning\n\n\n\nIt is not enough to just check that the dimensions of your table in R are the same as in excel!\nSee below\n\n\nInspect properties and structure\nCheck dimensions, object type, variable names and data types. You can use str() to display the internal structure of the object created when reading the file. The first line of the output specifies [n rows x n columns], type of object (e.g., data frame). The list also show data type (e.g., num = numeric, chr = characters) , dimensions and a few cases for each variable. If you have a large data set you can limit the number of output characters.\n\nstr(tbl_subj, nchar.max = 35)\n\ntibble [34 × 15] (S3: tbl_df/tbl/data.frame)\n $ Name                        : chr [1:34] \"JP01\" \"JP02\" \"JP03\" \"JP04\" ...\n $ Sex                         : chr [1:34] \"Male\" \"Male\" \"Male\" \"Female\" ...\n $ Body weight [g]             : num [1:34] 27.5 26.6 27.5 20.2 | __truncated__ ...\n $ Cannula length (mm)         : chr [1:34] \"2.2999999999999998\" \"2.2999999999999998\" \"2.2999999999999998\" \"2.2999999999999998\" ...\n $ Dilution                    : chr [1:34] \"1.5x\" \"1.5x\" \"1.5x\" \"1.5x\" ...\n $ Concentration               : chr [1:34] \"480 mg Ba/ml\" \"480 mg Ba/ml\" \"480 mg Ba/ml\" \"480 mg Ba/ml\" ...\n $ Withdrawn CA in syringe (uL): num [1:34] 5 5 5 5 5 5 5 5 17 17 ...\n $ Infused CA in mannitol (uL) : num [1:34] NA NA NA NA NA NA NA NA 0.2 0.2 ...\n $ Injection 1 rate (uL/min)   : num [1:34] 0.1 0.1 0.1 0.1 0.1 | __truncated__ ...\n $ Injection 1 volume (uL)     : num [1:34] 2.5 2.5 2.5 2.5 2.5 2.5 2.5 2.5 5 5 ...\n $ Injection 1 JP time (HH:MM) : chr [1:34] \"0.62847222222222221\" \"0.76111111111111107\" \"0.87152777777777779\" \"0.46875\" ...\n $ Injection 2 rate (uL/min)   : num [1:34] NA NA NA NA NA NA NA NA NA NA ...\n $ Injection 2 volume (uL)     : chr [1:34] NA NA NA NA ...\n $ Injection 2 JP time (HH:MM) : chr [1:34] NA NA NA NA ...\n $ Bubbles?                    : logi [1:34] NA NA NA NA NA NA ...\n\n\nInspect the table\nTo inspect the table, we usually work with an Integrated Development Environment like (e.g., Rstudio) where we can click on a variable and a window will allow to navigate the table. But to render the table in documents like this, recommended good for sharing, you can use kable() to render the table. In this example we also add a scroll box to make it compact.\n\nknitr::kable(\n  tbl_subj\n) %&gt;%\n  kable_paper(bootstrap_options = c(\"basic\",\"hover\")) %&gt;%\n  scroll_box(height= \"400px\")\n\n\n\n\nName\nSex\nBody weight [g]\nCannula length (mm)\nDilution\nConcentration\nWithdrawn CA in syringe (uL)\nInfused CA in mannitol (uL)\nInjection 1 rate (uL/min)\nInjection 1 volume (uL)\nInjection 1 JP time (HH:MM)\nInjection 2 rate (uL/min)\nInjection 2 volume (uL)\nInjection 2 JP time (HH:MM)\nBubbles?\n\n\n\nJP01\nMale\n27.50\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.62847222222222221\nNA\nNA\nNA\nNA\n\n\nJP02\nMale\n26.60\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.76111111111111107\nNA\nNA\nNA\nNA\n\n\nJP03\nMale\n27.50\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.87152777777777779\nNA\nNA\nNA\nNA\n\n\nJP04\nFemale\n20.20\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.46875\nNA\nNA\nNA\nNA\n\n\nJP05\nFemale\n20.20\n2.2000000000000002\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.62569444444444444\nNA\nNA\nNA\nNA\n\n\nJP06\nFemale\n20.30\n2.2000000000000002\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\nNA\nNA\nNA\nNA\nNA\n\n\nJP07\nMale\n26.40\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.70833333333333337\nNA\nNA\nNA\nNA\n\n\nJP08\nMale\n24.60\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.53125\nNA\nNA\nNA\nNA\n\n\nJP09\nMale\n26.80\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.5805555555555556\nNA\nNA\nNA\nNA\n\n\nJP10\nMale\n25.70\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.68958333333333333\nNA\nNA\nNA\nNA\n\n\nJP11\nMale\n24.40\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.78125\nNA\nNA\nNA\nNA\n\n\nJP12\nMale\n25.30\n2.2999999999999998\n1x\n320 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.86388888888888893\nNA\nNA\nNA\nNA\n\n\nJP13\nMale\n24.70\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n5.0\n0.4680555555555555\n0.50\n5\n0.51041666666666663\nNA\n\n\nJP14\nMale\n27.00\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n13.38\n0.50\n2.5\n0.61736111111111114\nNA\n\n\nJP15\nMale\n24.00\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.68333333333333324\n0.50\n2.5\n0.72638888888888886\nNA\n\n\nJP16\nMale\n25.80\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.84027777777777779\n0.50\n2.5\n0.8847222222222223\nNA\n\n\nJP17\nMale\n26.40\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.95694444444444438\n0.50\n2.5\n0.98611111111111116\nNA\n\n\nJP18\nMale\n26.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.41736111111111113\nNA\nNA\nNA\nNA\n\n\nJP19\nMale\n26.90\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.53749999999999998\nNA\nNA\nNA\nNA\n\n\nJP20\nMale\n26.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.65208333333333335\n0.50\n2.5\n0.69097222222222221\nNA\n\n\nJP21\nFemale\n21.00\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.74513888888888891\nNA\nNA\nNA\nNA\n\n\nJP22\nFemale\n19.50\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.8666666666666667\n0.25\n2.5\n0.93819444444444444\nNA\n\n\nJP23\nFemale\n19.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.97777777777777775\nNA\nNA\nNA\nNA\n\n\nJP24\nFemale\n19.56\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.47222222222222227\nNA\nNA\nNA\nNA\n\n\nJP25\nFemale\n19.63\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.54861111111111105\nNA\nNA\nNA\nNA\n\n\nJP26\nFemale\n19.71\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.70694444444444438\nNA\nNA\nNA\nNA\n\n\nJP27\nFemale\n19.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.83611111111111114\nNA\nNA\nNA\nNA\n\n\nJP28\nFemale\n20.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.92986111111111114\n0.25\n5\n4.1666666666666666E-3\nNA\n\n\nJP29\nFemale\n18.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.41180555555555554\nNA\nNA\nNA\nNA\n\n\nJP30\nFemale\n19.03\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.50763888888888886\n0.25\nca. 2.5\n0.57430555555555551\nNA\n\n\nJP31\nFemale\n20.50\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n0.61249999999999993\nNA\nNA\nNA\nNA\n\n\nJP32\nFemale\n20.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n0.7006944444444444\n0.25\nca. 2.5\n0.76944444444444438\nNA\n\n\nJP33\nFemale\n21.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n0.7993055555555556\n0.25\nca. 2.5\n0.86597222222222225\nNA\n\n\nJP34\nFemale\n19.21\nN/A\nNA\nNA\nNA\nNA\nNA\nNA\nN/A\nNA\nNA\nN/A\nNA"
  },
  {
    "objectID": "Table_read_file.html#fixes",
    "href": "Table_read_file.html#fixes",
    "title": "Read tables from file",
    "section": "Fixes",
    "text": "Fixes\nIdentify the source of the problem\nIs the source table correct?\nIf we open this table in excel we see the correct values (e.g.,the column ‘cannula length (mm)’ contains values of 2.2 or 2.3, and ‘Injection JP time (HH:MM)’ values like 18:45). So we know this is a problem when reading the table in R.\nWhat do those variables have in common ?\nThey all contained some cells with missing values that the researchers coded with the string ‘N/A’,\nHere we have an issue with the source table. Although in Excel we can read the information correctly, we lose three variables when reading it in R. We"
  },
  {
    "objectID": "Table_read_file.html#troubleshooting",
    "href": "Table_read_file.html#troubleshooting",
    "title": "Read tables from file",
    "section": "Troubleshooting",
    "text": "Troubleshooting\nFind the errors\nHere we can already observe some unexpected errors. The errors in this example are not uncommon when we are given a table:\n\nThe variable ‘Cannula length (mm)’ would be expected to be numeric but it is read as character (chr) and the number format seems odd , with too many decimals\nThe variables ‘Injection 1 JP time (HH:MM)’ and ‘Injection 2 JP time (HH:MM)’ do not fullfill the format indicated in the variable name, of two groups of 2 digits separated by colon.\nWe note that there are missing values (NA), those are the blank cells in the excel file.\nNote: str() make give output like __truncated__ to indicate that not all the cases are displayed on the screen. This is just for display and it doesn’t mean that text is in the table or that the full column was not read.\nIdentify the source of the problem\nIs the source table correct?\nIf we open this table in excel we see the correct values (e.g.,the column ‘cannula length (mm)’ contains values like 2.2 or 2.3, and ‘Injection JP time (HH:MM)’ values like 18:45). So we know this is a problem when reading the table in R (likely to happen in other software as well).\nOne or multiple errors ?\nSeveral columns were not correctly read but it seems the problem is the same. They are all read as characters when should have been read in a different format. Do they have something in common?\nInspect columns with the wrong formats\nLet us print the unique values of these columns. The function unique() outputs the values that do not repeat in the column:\n\nunique(tbl_subj$`Cannula length (mm)`)\n\n[1] \"2.2999999999999998\" \"2.2000000000000002\" \"N/A\"               \n\nunique(tbl_subj$`Injection 1 JP time (HH:MM)`)\n\n [1] \"0.62847222222222221\" \"0.76111111111111107\" \"0.87152777777777779\"\n [4] \"0.46875\"             \"0.62569444444444444\" NA                   \n [7] \"0.70833333333333337\" \"0.53125\"             \"0.5805555555555556\" \n[10] \"0.68958333333333333\" \"0.78125\"             \"0.86388888888888893\"\n[13] \"0.4680555555555555\"  \"13.38\"               \"0.68333333333333324\"\n[16] \"0.84027777777777779\" \"0.95694444444444438\" \"0.41736111111111113\"\n[19] \"0.53749999999999998\" \"0.65208333333333335\" \"0.74513888888888891\"\n[22] \"0.8666666666666667\"  \"0.97777777777777775\" \"0.47222222222222227\"\n[25] \"0.54861111111111105\" \"0.70694444444444438\" \"0.83611111111111114\"\n[28] \"0.92986111111111114\" \"0.41180555555555554\" \"0.50763888888888886\"\n[31] \"0.61249999999999993\" \"0.7006944444444444\"  \"0.7993055555555556\" \n[34] \"N/A\"                \n\nunique(tbl_subj$`Injection 2 JP time (HH:MM)`)\n\n [1] NA                      \"0.51041666666666663\"   \"0.61736111111111114\"  \n [4] \"0.72638888888888886\"   \"0.8847222222222223\"    \"0.98611111111111116\"  \n [7] \"0.69097222222222221\"   \"0.93819444444444444\"   \"4.1666666666666666E-3\"\n[10] \"0.57430555555555551\"   \"0.76944444444444438\"   \"0.86597222222222225\"  \n[13] \"N/A\"                  \n\n\nThe three columns contained some cells with missing values that the researchers coded with the string “N/A” . Note that some contain also the value NA, which is the symbol that R uses to represent missing values (means not available), they are not surrounded by double quotes because they are not a character type cells, unlike “N/A”. Cells with NA are blank in excel.\nHere, because researchers wrote a character string “N/A” in some cells, the entire column was read as having character type data, which prevented from reading numbers and date/time cells correctly.\nIdentify solutions\nSo we have a problem when reading a table in R that we don’t have if we use excel. What can we do?\nDefine column types when reading the file\nMost packages allow to specify your column types. Below we specify that the read_excel function should guess the format for all columns except the columns we had troubles with (the package allows to specify text, numeric, guess or date)\n\nPRO: if we specify all formats then it is clear from reading the code what are the formats of each variable\nCON: this may not always be a convenient solution for large tables with many columns.\n\n\ntbl &lt;- readxl::read_excel(fileinput, sheet='Control_room_sheet',col_types = c(\"guess\",\"guess\",\"guess\",\"numeric\",\"guess\",\"guess\",\"guess\",\"guess\",\"guess\",\"guess\",\"date\",\"guess\",\"guess\",\"date\",\"guess\"))\n\nCorrect the source table in excel\nIn this example it would just be easier to go to the source table and delete those “N/A” entries, the cells will be then blank and read as NA by R without affecting the column format. This modification can be done with a script if the table is large\n\nPRO: the source will be read correctly in any new script.\nCON: modifications should never comprise any loss of information, if the table is too complex it will add a new step ( a ‘correcting’ script) from original data, if the it is simple and it is done manually there is a small chance for human error\nChoose the most practical and safest solution\nIn this example, the source table required manual entries and inspections by researchers because they had to fill some on-site information from the lab. Thus, the most practical solution seems to delete ‘N/A’ entries and instruct researchers to leave empty those cells instead."
  },
  {
    "objectID": "Table_read_file.html#inspect-properties-and-structure",
    "href": "Table_read_file.html#inspect-properties-and-structure",
    "title": "Read tables from file",
    "section": "Inspect properties and structure",
    "text": "Inspect properties and structure\nCheck dimensions, object type, variable names and data types. You can use str() to display the internal structure of the object created when reading the file. The first line of the output specifies [n rows x n columns], type of object (e.g., data frame). The list also show data type (e.g., num = numeric, chr = characters) , dimensions and a few cases for each variable. If you have a large data set you can limit the number of output characters.\n\nstr(tbl_subj, nchar.max = 35)\n\ntibble [34 × 15] (S3: tbl_df/tbl/data.frame)\n $ Name                        : chr [1:34] \"JP01\" \"JP02\" \"JP03\" \"JP04\" ...\n $ Sex                         : chr [1:34] \"Male\" \"Male\" \"Male\" \"Female\" ...\n $ Body weight [g]             : num [1:34] 27.5 26.6 27.5 20.2 | __truncated__ ...\n $ Cannula length (mm)         : chr [1:34] \"2.2999999999999998\" \"2.2999999999999998\" \"2.2999999999999998\" \"2.2999999999999998\" ...\n $ Dilution                    : chr [1:34] \"1.5x\" \"1.5x\" \"1.5x\" \"1.5x\" ...\n $ Concentration               : chr [1:34] \"480 mg Ba/ml\" \"480 mg Ba/ml\" \"480 mg Ba/ml\" \"480 mg Ba/ml\" ...\n $ Withdrawn CA in syringe (uL): num [1:34] 5 5 5 5 5 5 5 5 17 17 ...\n $ Infused CA in mannitol (uL) : num [1:34] NA NA NA NA NA NA NA NA 0.2 0.2 ...\n $ Injection 1 rate (uL/min)   : num [1:34] 0.1 0.1 0.1 0.1 0.1 | __truncated__ ...\n $ Injection 1 volume (uL)     : num [1:34] 2.5 2.5 2.5 2.5 2.5 2.5 2.5 2.5 5 5 ...\n $ Injection 1 JP time (HH:MM) : chr [1:34] \"0.62847222222222221\" \"0.76111111111111107\" \"0.87152777777777779\" \"0.46875\" ...\n $ Injection 2 rate (uL/min)   : num [1:34] NA NA NA NA NA NA NA NA NA NA ...\n $ Injection 2 volume (uL)     : chr [1:34] NA NA NA NA ...\n $ Injection 2 JP time (HH:MM) : chr [1:34] NA NA NA NA ...\n $ Bubbles?                    : logi [1:34] NA NA NA NA NA NA ..."
  },
  {
    "objectID": "Table_read_file.html#inspect-the-table",
    "href": "Table_read_file.html#inspect-the-table",
    "title": "Read tables from file",
    "section": "Inspect the table",
    "text": "Inspect the table\nTo inspect the table, we usually work with an Integrated Development Environment like (e.g., Rstudio) where we can click on a variable and a window will allow to navigate the table. But to render the table in documents like this, recommended good for sharing, you can use kable() to render the table. In this example we also add a scroll box to make it compact.\n\nknitr::kable(\n  tbl_subj\n) %&gt;%\n  kable_paper(bootstrap_options = c(\"basic\",\"hover\")) %&gt;%\n  scroll_box(height= \"400px\")\n\n\n\n\nName\nSex\nBody weight [g]\nCannula length (mm)\nDilution\nConcentration\nWithdrawn CA in syringe (uL)\nInfused CA in mannitol (uL)\nInjection 1 rate (uL/min)\nInjection 1 volume (uL)\nInjection 1 JP time (HH:MM)\nInjection 2 rate (uL/min)\nInjection 2 volume (uL)\nInjection 2 JP time (HH:MM)\nBubbles?\n\n\n\nJP01\nMale\n27.50\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.62847222222222221\nNA\nNA\nNA\nNA\n\n\nJP02\nMale\n26.60\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.76111111111111107\nNA\nNA\nNA\nNA\n\n\nJP03\nMale\n27.50\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.87152777777777779\nNA\nNA\nNA\nNA\n\n\nJP04\nFemale\n20.20\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.46875\nNA\nNA\nNA\nNA\n\n\nJP05\nFemale\n20.20\n2.2000000000000002\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.62569444444444444\nNA\nNA\nNA\nNA\n\n\nJP06\nFemale\n20.30\n2.2000000000000002\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\nNA\nNA\nNA\nNA\nNA\n\n\nJP07\nMale\n26.40\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.70833333333333337\nNA\nNA\nNA\nNA\n\n\nJP08\nMale\n24.60\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n0.53125\nNA\nNA\nNA\nNA\n\n\nJP09\nMale\n26.80\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.5805555555555556\nNA\nNA\nNA\nNA\n\n\nJP10\nMale\n25.70\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.68958333333333333\nNA\nNA\nNA\nNA\n\n\nJP11\nMale\n24.40\n2.2999999999999998\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.78125\nNA\nNA\nNA\nNA\n\n\nJP12\nMale\n25.30\n2.2999999999999998\n1x\n320 mg Ba/ml\n17\n0.2\n0.50\n5.0\n0.86388888888888893\nNA\nNA\nNA\nNA\n\n\nJP13\nMale\n24.70\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n5.0\n0.4680555555555555\n0.50\n5\n0.51041666666666663\nNA\n\n\nJP14\nMale\n27.00\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n13.38\n0.50\n2.5\n0.61736111111111114\nNA\n\n\nJP15\nMale\n24.00\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.68333333333333324\n0.50\n2.5\n0.72638888888888886\nNA\n\n\nJP16\nMale\n25.80\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.84027777777777779\n0.50\n2.5\n0.8847222222222223\nNA\n\n\nJP17\nMale\n26.40\n2.2000000000000002\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.95694444444444438\n0.50\n2.5\n0.98611111111111116\nNA\n\n\nJP18\nMale\n26.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.41736111111111113\nNA\nNA\nNA\nNA\n\n\nJP19\nMale\n26.90\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.53749999999999998\nNA\nNA\nNA\nNA\n\n\nJP20\nMale\n26.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n0.65208333333333335\n0.50\n2.5\n0.69097222222222221\nNA\n\n\nJP21\nFemale\n21.00\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.74513888888888891\nNA\nNA\nNA\nNA\n\n\nJP22\nFemale\n19.50\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.8666666666666667\n0.25\n2.5\n0.93819444444444444\nNA\n\n\nJP23\nFemale\n19.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.97777777777777775\nNA\nNA\nNA\nNA\n\n\nJP24\nFemale\n19.56\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.47222222222222227\nNA\nNA\nNA\nNA\n\n\nJP25\nFemale\n19.63\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.54861111111111105\nNA\nNA\nNA\nNA\n\n\nJP26\nFemale\n19.71\n2.2999999999999998\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.70694444444444438\nNA\nNA\nNA\nNA\n\n\nJP27\nFemale\n19.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.83611111111111114\nNA\nNA\nNA\nNA\n\n\nJP28\nFemale\n20.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.92986111111111114\n0.25\n5\n4.1666666666666666E-3\nNA\n\n\nJP29\nFemale\n18.60\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.41180555555555554\nNA\nNA\nNA\nNA\n\n\nJP30\nFemale\n19.03\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n0.50763888888888886\n0.25\nca. 2.5\n0.57430555555555551\nNA\n\n\nJP31\nFemale\n20.50\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n0.61249999999999993\nNA\nNA\nNA\nNA\n\n\nJP32\nFemale\n20.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n0.7006944444444444\n0.25\nca. 2.5\n0.76944444444444438\nNA\n\n\nJP33\nFemale\n21.20\n2.2000000000000002\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n0.7993055555555556\n0.25\nca. 2.5\n0.86597222222222225\nNA\n\n\nJP34\nFemale\n19.21\nN/A\nNA\nNA\nNA\nNA\nNA\nNA\nN/A\nNA\nNA\nN/A\nNA"
  },
  {
    "objectID": "Table_read_file.html#find-the-errors",
    "href": "Table_read_file.html#find-the-errors",
    "title": "Read tables from file",
    "section": "Find the errors",
    "text": "Find the errors\nHere we can already observe some unexpected errors. The errors in this example are not uncommon when we are given a table:\n\nThe variable ‘Cannula length (mm)’ would be expected to be numeric but it is read as character (chr) and the number format seems odd , with too many decimals\nThe variables ‘Injection 1 JP time (HH:MM)’ and ‘Injection 2 JP time (HH:MM)’ do not fullfill the format indicated in the variable name, of two groups of 2 digits separated by colon.\nWe note that there are missing values (NA), those are the blank cells in the excel file.\nNote: str() make give output like __truncated__ to indicate that not all the cases are displayed on the screen. This is just for display and it doesn’t mean that text is in the table or that the full column was not read."
  },
  {
    "objectID": "Table_read_file.html#identify-the-source-of-the-problem",
    "href": "Table_read_file.html#identify-the-source-of-the-problem",
    "title": "Read tables from file",
    "section": "Identify the source of the problem",
    "text": "Identify the source of the problem\nIs the source table correct?\nIf we open this table in excel we see the correct values (e.g.,the column ‘cannula length (mm)’ contains values like 2.2 or 2.3, and ‘Injection JP time (HH:MM)’ values like 18:45). So we know this is a problem when reading the table in R (likely to happen in other software as well).\nOne or multiple errors ?\nSeveral columns were not correctly read but it seems the problem is the same. They are all read as characters when should have been read in a different format. Do they have something in common?\nInspect columns with the wrong formats\nLet us print the unique values of these columns. The function unique() outputs the values that do not repeat in the column:\n\nunique(tbl_subj$`Cannula length (mm)`)\n\n[1] \"2.2999999999999998\" \"2.2000000000000002\" \"N/A\"               \n\nunique(tbl_subj$`Injection 1 JP time (HH:MM)`)\n\n [1] \"0.62847222222222221\" \"0.76111111111111107\" \"0.87152777777777779\"\n [4] \"0.46875\"             \"0.62569444444444444\" NA                   \n [7] \"0.70833333333333337\" \"0.53125\"             \"0.5805555555555556\" \n[10] \"0.68958333333333333\" \"0.78125\"             \"0.86388888888888893\"\n[13] \"0.4680555555555555\"  \"13.38\"               \"0.68333333333333324\"\n[16] \"0.84027777777777779\" \"0.95694444444444438\" \"0.41736111111111113\"\n[19] \"0.53749999999999998\" \"0.65208333333333335\" \"0.74513888888888891\"\n[22] \"0.8666666666666667\"  \"0.97777777777777775\" \"0.47222222222222227\"\n[25] \"0.54861111111111105\" \"0.70694444444444438\" \"0.83611111111111114\"\n[28] \"0.92986111111111114\" \"0.41180555555555554\" \"0.50763888888888886\"\n[31] \"0.61249999999999993\" \"0.7006944444444444\"  \"0.7993055555555556\" \n[34] \"N/A\"                \n\nunique(tbl_subj$`Injection 2 JP time (HH:MM)`)\n\n [1] NA                      \"0.51041666666666663\"   \"0.61736111111111114\"  \n [4] \"0.72638888888888886\"   \"0.8847222222222223\"    \"0.98611111111111116\"  \n [7] \"0.69097222222222221\"   \"0.93819444444444444\"   \"4.1666666666666666E-3\"\n[10] \"0.57430555555555551\"   \"0.76944444444444438\"   \"0.86597222222222225\"  \n[13] \"N/A\"                  \n\n\nThe three columns contained some cells with missing values that the researchers coded with the string “N/A” . Note that some contain also the value NA, which is the symbol that R uses to represent missing values (means not available), they are not surrounded by double quotes because they are not a character type cells, unlike “N/A”. Cells with NA are blank in excel.\nHere, because researchers wrote a character string “N/A” in some cells, the entire column was read as having character type data, which prevented from reading numbers and date/time cells correctly."
  },
  {
    "objectID": "Table_read_file.html#identify-solutions",
    "href": "Table_read_file.html#identify-solutions",
    "title": "Read tables from file",
    "section": "Identify solutions",
    "text": "Identify solutions\nSo we have a problem when reading a table in R that we don’t have if we use excel. What can we do?\nCode fix: specify column types when reading\nMost packages allow to specify your column types. Below we specify that the read_excel function should guess the format for all columns except the columns we had troubles with (the package allows to specify text, numeric, guess or date)\n\nPRO: if we specify all formats then it is clear from reading the code what are the formats of each variable\nCON: this may not always be a convenient solution for large tables with many columns.\n\n\nSPECIFY NA STRINGS\n\ntbl &lt;- readxl::read_excel(fileinput, sheet='Control_room_sheet',col_types = c(\"guess\",\"guess\",\"guess\",\"numeric\",\"guess\",\"guess\",\"guess\",\"guess\",\"guess\",\"guess\",\"date\",\"guess\",\"guess\",\"date\",\"guess\"))\n\n\ntbl &lt;- readxl::read_excel(fileinput, sheet='Control_room_sheet',na = c(\"\",\"N/A\"))\n\n\nknitr::kable(\n  tbl\n) %&gt;%\n  kable_paper(bootstrap_options = c(\"basic\",\"hover\")) %&gt;%\n  scroll_box(height= \"400px\")\n\n\n\n\nName\nSex\nBody weight [g]\nCannula length (mm)\nDilution\nConcentration\nWithdrawn CA in syringe (uL)\nInfused CA in mannitol (uL)\nInjection 1 rate (uL/min)\nInjection 1 volume (uL)\nInjection 1 JP time (HH:MM)\nInjection 2 rate (uL/min)\nInjection 2 volume (uL)\nInjection 2 JP time (HH:MM)\nBubbles?\n\n\n\nJP01\nMale\n27.50\n2.3\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 15:05:00\nNA\nNA\nNA\nNA\n\n\nJP02\nMale\n26.60\n2.3\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 18:16:00\nNA\nNA\nNA\nNA\n\n\nJP03\nMale\n27.50\n2.3\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 20:55:00\nNA\nNA\nNA\nNA\n\n\nJP04\nFemale\n20.20\n2.3\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 11:15:00\nNA\nNA\nNA\nNA\n\n\nJP05\nFemale\n20.20\n2.2\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 15:01:00\nNA\nNA\nNA\nNA\n\n\nJP06\nFemale\n20.30\n2.2\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\nNA\nNA\nNA\nNA\nNA\n\n\nJP07\nMale\n26.40\n2.3\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 17:00:00\nNA\nNA\nNA\nNA\n\n\nJP08\nMale\n24.60\n2.3\n1.5x\n480 mg Ba/ml\n5\nNA\n0.10\n2.5\n1899-12-31 12:45:00\nNA\nNA\nNA\nNA\n\n\nJP09\nMale\n26.80\n2.3\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n1899-12-31 13:56:00\nNA\nNA\nNA\nNA\n\n\nJP10\nMale\n25.70\n2.3\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n1899-12-31 16:33:00\nNA\nNA\nNA\nNA\n\n\nJP11\nMale\n24.40\n2.3\n1.5x\n480 mg Ba/ml\n17\n0.2\n0.50\n5.0\n1899-12-31 18:45:00\nNA\nNA\nNA\nNA\n\n\nJP12\nMale\n25.30\n2.3\n1x\n320 mg Ba/ml\n17\n0.2\n0.50\n5.0\n1899-12-31 20:44:00\nNA\nNA\nNA\nNA\n\n\nJP13\nMale\n24.70\n2.2\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n5.0\n1899-12-31 11:14:00\n0.50\n5\n1899-12-31 12:15:00\nNA\n\n\nJP14\nMale\n27.00\n2.2\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1900-01-13 09:07:12\n0.50\n2.5\n1899-12-31 14:49:00\nNA\n\n\nJP15\nMale\n24.00\n2.2\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 16:24:00\n0.50\n2.5\n1899-12-31 17:26:00\nNA\n\n\nJP16\nMale\n25.80\n2.2\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 20:10:00\n0.50\n2.5\n1899-12-31 21:14:00\nNA\n\n\nJP17\nMale\n26.40\n2.2\n1x\n320 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 22:58:00\n0.50\n2.5\n1899-12-31 23:40:00\nNA\n\n\nJP18\nMale\n26.60\n2.2\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 10:01:00\nNA\nNA\nNA\nNA\n\n\nJP19\nMale\n26.90\n2.2\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 12:54:00\nNA\nNA\nNA\nNA\n\n\nJP20\nMale\n26.20\n2.2\n0.75x\n240 mg Ba/ml\n17\n0.5\n0.50\n2.5\n1899-12-31 15:39:00\n0.50\n2.5\n1899-12-31 16:35:00\nNA\n\n\nJP21\nFemale\n21.00\n2.2\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 17:53:00\nNA\nNA\nNA\nNA\n\n\nJP22\nFemale\n19.50\n2.2\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 20:48:00\n0.25\n2.5\n1899-12-31 22:31:00\nNA\n\n\nJP23\nFemale\n19.60\n2.2\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 23:28:00\nNA\nNA\nNA\nNA\n\n\nJP24\nFemale\n19.56\n2.3\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 11:20:00\nNA\nNA\nNA\nNA\n\n\nJP25\nFemale\n19.63\n2.3\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 13:10:00\nNA\nNA\nNA\nNA\n\n\nJP26\nFemale\n19.71\n2.3\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 16:58:00\nNA\nNA\nNA\nNA\n\n\nJP27\nFemale\n19.20\n2.2\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 20:04:00\nNA\nNA\nNA\nNA\n\n\nJP28\nFemale\n20.20\n2.2\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 22:19:00\n0.25\n5\n1899-12-31 00:06:00\nNA\n\n\nJP29\nFemale\n18.60\n2.2\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 09:53:00\nNA\nNA\nNA\nNA\n\n\nJP30\nFemale\n19.03\n2.2\n0.75x\n240 mg Ba/ml\n10\n0.5\n0.25\n5.0\n1899-12-31 12:11:00\n0.25\nca. 2.5\n1899-12-31 13:47:00\nNA\n\n\nJP31\nFemale\n20.50\n2.2\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n1899-12-31 14:42:00\nNA\nNA\nNA\nNA\n\n\nJP32\nFemale\n20.20\n2.2\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n1899-12-31 16:49:00\n0.25\nca. 2.5\n1899-12-31 18:28:00\nNA\n\n\nJP33\nFemale\n21.20\n2.2\n0.75x\n240 mg Ba/ml\n10\n1.0\n0.25\n5.0\n1899-12-31 19:11:00\n0.25\nca. 2.5\n1899-12-31 20:47:00\nNA\n\n\nJP34\nFemale\n19.21\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\nNA\n\n\n\n\n\n\nstr(tbl)\n\ntibble [34 × 15] (S3: tbl_df/tbl/data.frame)\n $ Name                        : chr [1:34] \"JP01\" \"JP02\" \"JP03\" \"JP04\" ...\n $ Sex                         : chr [1:34] \"Male\" \"Male\" \"Male\" \"Female\" ...\n $ Body weight [g]             : num [1:34] 27.5 26.6 27.5 20.2 20.2 20.3 26.4 24.6 26.8 25.7 ...\n $ Cannula length (mm)         : num [1:34] 2.3 2.3 2.3 2.3 2.2 2.2 2.3 2.3 2.3 2.3 ...\n $ Dilution                    : chr [1:34] \"1.5x\" \"1.5x\" \"1.5x\" \"1.5x\" ...\n $ Concentration               : chr [1:34] \"480 mg Ba/ml\" \"480 mg Ba/ml\" \"480 mg Ba/ml\" \"480 mg Ba/ml\" ...\n $ Withdrawn CA in syringe (uL): num [1:34] 5 5 5 5 5 5 5 5 17 17 ...\n $ Infused CA in mannitol (uL) : num [1:34] NA NA NA NA NA NA NA NA 0.2 0.2 ...\n $ Injection 1 rate (uL/min)   : num [1:34] 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.5 0.5 ...\n $ Injection 1 volume (uL)     : num [1:34] 2.5 2.5 2.5 2.5 2.5 2.5 2.5 2.5 5 5 ...\n $ Injection 1 JP time (HH:MM) : POSIXct[1:34], format: \"1899-12-31 15:05:00\" \"1899-12-31 18:16:00\" ...\n $ Injection 2 rate (uL/min)   : num [1:34] NA NA NA NA NA NA NA NA NA NA ...\n $ Injection 2 volume (uL)     : chr [1:34] NA NA NA NA ...\n $ Injection 2 JP time (HH:MM) : POSIXct[1:34], format: NA NA ...\n $ Bubbles?                    : logi [1:34] NA NA NA NA NA NA ...\n\n\nSource fix: correct the source table in excel\nIn this example it would just be easier to go to the source table and delete those “N/A” entries, the cells will be then blank and read as NA by R without affecting the column format. This modification can be done with a script if the table is large\n\nPRO: the source will be read correctly in any new script.\nCON: if the table is too complex it will add a new step ( a ‘correcting’ script) from original data, if the it is simple and it is done manually there is a small chance for human error"
  },
  {
    "objectID": "Table_read_file.html#choose-the-most-practical-and-safest-solution",
    "href": "Table_read_file.html#choose-the-most-practical-and-safest-solution",
    "title": "Read tables from file",
    "section": "Choose the most practical and safest solution",
    "text": "Choose the most practical and safest solution\nIn this example, the source table required manual entries and inspections by researchers because they had to fill some on-site information from the lab. Thus, the most practical solution seems to delete ‘N/A’ entries and instruct researchers to leave empty those cells instead."
  },
  {
    "objectID": "Table_read_file.html#choose-the-most-practical-and-safe-solution",
    "href": "Table_read_file.html#choose-the-most-practical-and-safe-solution",
    "title": "Read tables from file",
    "section": "Choose the most practical and safe solution",
    "text": "Choose the most practical and safe solution\nIn this example, the source table required manual entries and inspections by researchers because they had to fill some on-site information from the lab. Thus, the most practical solution seems to delete ‘N/A’ entries and instruct researchers to leave empty those cells instead. This does not compromise safety as the table would have required manual inspection and entries anyway. Note that this would have been needed for consistency in the table, even if this format-read issue (some cells had been left empty while some others had ‘N/A’, this is inconsistent formatting unless it is required to convey different information)."
  }
]